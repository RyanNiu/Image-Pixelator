<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图像像素化工具 - 免费在线像素艺术生成器 | 多语言支持</title>
    <meta name="description" content="在浏览器中即时将图片转换为像素艺术！无需上传，纯前端处理，免费且保护隐私。">
    <meta name="keywords" content="像素画生成器,在线图像转像素风格,免费像素化工具">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/logo.png">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J86JS45XHN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-J86JS45XHN');
    </script>
    
    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sxbdd5pgec");
    </script>
    
    <!-- Language alternatives -->
    <link rel="alternate" hreflang="en" href="/en/">
    <link rel="alternate" hreflang="zh" href="/zh/">
    <link rel="alternate" hreflang="es" href="/es/">
    
    <link rel="stylesheet" href="/src/styles/main.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <h1 class="text-2xl font-bold text-gray-900" data-i18n="title">图像像素化工具</h1>
                <div class="language-selector">
                    <select id="languageSelect" class="border rounded px-3 py-1">
                        <option value="en">🇺🇸 English</option>
                        <option value="zh" selected>🇨🇳 中文</option>
                        <option value="es">🇪🇸 Español</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Privacy Notice -->
        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-8">
            <p class="text-green-800 text-sm" data-i18n="privacy-notice">
                🔒 所有处理均在您的浏览器中完成。图片不会离开您的设备。关闭页面后数据自动清除。
            </p>
        </div>

        <!-- Upload Section -->
        <section class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold mb-4" data-i18n="upload-title">上传图片</h2>
            
            <div id="dropZone" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors cursor-pointer">
                <div id="uploadPrompt">
                    <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <p class="text-lg text-gray-600 mb-2" data-i18n="upload-prompt">点击上传或拖拽图片到此处</p>
                    <p class="text-sm text-gray-500" data-i18n="upload-limits">支持 JPG、PNG、WebP • 最大 20MB • 建议 ≤10MB</p>
                </div>
                <input type="file" id="imageInput" accept="image/*" class="hidden">
            </div>
        </section>

        <!-- Processing Section -->
        <div id="processingSection">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Controls -->
                <section class="bg-white rounded-lg shadow-sm border p-6">
                    <h2 class="text-xl font-semibold mb-4" data-i18n="controls-title">像素化设置</h2>
                    
                    <!-- Pixel Size -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="pixel-size">像素大小</label>
                        <div class="flex items-center space-x-4">
                            <input type="range" id="pixelSize" min="1" max="50" value="8" class="flex-1">
                            <span id="pixelSizeValue" class="text-sm font-mono bg-gray-100 px-2 py-1 rounded">8px</span>
                        </div>
                    </div>

                    <!-- Color Mode -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="color-mode">颜色模式</label>
                        <select id="colorMode" class="w-full border rounded px-3 py-2">
                            <option value="original" data-i18n="color-original">原色保留</option>
                            <option value="retro" data-i18n="color-retro">复古8位色</option>
                            <option value="grayscale" data-i18n="color-grayscale">灰度像素</option>
                            <option value="sepia" data-i18n="color-sepia">怀旧棕褐色</option>
                            <option value="vibrant" data-i18n="color-vibrant">鲜艳色彩</option>
                        </select>
                    </div>

                    <!-- Edge Processing -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="edge-processing">边缘处理</label>
                        <select id="edgeMode" class="w-full border rounded px-3 py-2">
                            <option value="hard" data-i18n="edge-hard">硬边缘</option>
                            <option value="soft" data-i18n="edge-soft">软边缘</option>
                        </select>
                    </div>

                    <!-- Presets -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="presets">快速预设</label>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="preset-btn px-3 py-2 text-sm border rounded hover:bg-gray-50 transition-colors" data-preset="game" data-i18n="preset-game">8位游戏风格</button>
                            <button class="preset-btn px-3 py-2 text-sm border rounded hover:bg-gray-50 transition-colors" data-preset="arcade" data-i18n="preset-arcade">街机复古风</button>
                            <button class="preset-btn px-3 py-2 text-sm border rounded hover:bg-gray-50 transition-colors" data-preset="avatar" data-i18n="preset-avatar">低像素头像</button>
                            <button class="preset-btn px-3 py-2 text-sm border rounded hover:bg-gray-50 transition-colors" data-preset="minecraft" data-i18n="preset-minecraft">我的世界风格</button>
                            <button class="preset-btn px-3 py-2 text-sm border rounded hover:bg-gray-50 transition-colors" data-preset="mosaic" data-i18n="preset-mosaic">马赛克艺术</button>
                            <button class="preset-btn px-3 py-2 text-sm border rounded hover:bg-gray-50 transition-colors" data-preset="vintage" data-i18n="preset-vintage">复古效果</button>
                        </div>
                    </div>

                    <!-- Download -->
                    <div class="border-t pt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="download-format">下载格式</label>
                        <select id="downloadFormat" class="w-full border rounded px-3 py-2 mb-4">
                            <option value="png">PNG (透明背景)</option>
                            <option value="jpg">JPG (压缩)</option>
                            <option value="webp">WebP (高效)</option>
                        </select>
                        <button id="downloadBtn" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50" disabled data-i18n="download-btn">下载像素化图片</button>
                        <p class="text-xs text-gray-500 mt-2 text-center" data-i18n="upload-first-hint">上传图片后即可下载</p>
                    </div>
                </section>

                <!-- Preview -->
                <section class="lg:col-span-2 bg-white rounded-lg shadow-sm border p-6">
                    <h2 class="text-xl font-semibold mb-4" data-i18n="preview-title">预览</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Original -->
                        <div>
                            <h3 class="text-sm font-medium text-gray-700 mb-2" data-i18n="original-image">原始图片</h3>
                            <div class="border-2 border-dashed border-gray-200 rounded-lg bg-gray-50 relative h-64 flex items-center justify-center">
                                <canvas id="originalCanvas" class="max-w-full h-auto cursor-pointer hidden"></canvas>
                                <div id="originalPlaceholder" class="text-center text-gray-400">
                                    <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    <p class="text-sm" data-i18n="no-image-uploaded">尚未上传图片</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pixelated -->
                        <div>
                            <h3 class="text-sm font-medium text-gray-700 mb-2" data-i18n="pixelated-image">像素化结果</h3>
                            <div class="border-2 border-dashed border-gray-200 rounded-lg bg-gray-50 relative h-64 flex items-center justify-center">
                                <canvas id="pixelatedCanvas" class="max-w-full h-auto cursor-pointer hidden"></canvas>
                                <div id="pixelatedPlaceholder" class="text-center text-gray-400">
                                    <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                    </svg>
                                    <p class="text-sm" data-i18n="pixelated-preview">像素化预览将在此显示</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <script type="module" src="/src/main.js"></script>
</body>
</html>