"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224],{63:(t,e,r)=>{var i=r(7260);r.o(i,"useRouter")&&r.d(e,{useRouter:function(){return i.useRouter}})},125:(t,e,r)=>{var i=r(2115),n="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=i.useState,a=i.useEffect,o=i.useLayoutEffect,l=i.useDebugValue;function h(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!n(t,r)}catch(t){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),i=s({inst:{value:r,getSnapshot:e}}),n=i[0].inst,u=i[1];return o(function(){n.value=r,n.getSnapshot=e,h(n)&&u({inst:n})},[t,r,e]),a(function(){return h(n)&&u({inst:n}),t(function(){h(n)&&u({inst:n})})},[t]),l(r),r};e.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},258:(t,e,r)=>{r.d(e,{Hl:()=>c});var i=r(4877),n=r(2115),s=r(7548);function a(t,e){let r;return(...i)=>{window.clearTimeout(r),r=window.setTimeout(()=>t(...i),e)}}let o=["x","y","top","bottom","left","right","width","height"];var l=r(4735),h=r(5155);function u({ref:t,children:e,fallback:r,resize:l,style:u,gl:c,events:d=i.f,eventSource:f,eventPrefix:p,shadows:g,linear:m,flat:b,legacy:v,orthographic:y,frameloop:x,dpr:w,performance:M,raycaster:_,camera:E,scene:C,onPointerMissed:S,onCreated:A,...j}){n.useMemo(()=>(0,i.e)(s),[]);let O=(0,i.u)(),[P,T]=function({debounce:t,scroll:e,polyfill:r,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){var s,l,h;let u=r||("undefined"==typeof window?class{}:window.ResizeObserver);if(!u)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[c,d]=(0,n.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),f=(0,n.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:c,orientationHandler:null}),p=t?"number"==typeof t?t:t.scroll:null,g=t?"number"==typeof t?t:t.resize:null,m=(0,n.useRef)(!1);(0,n.useEffect)(()=>(m.current=!0,()=>void(m.current=!1)));let[b,v,y]=(0,n.useMemo)(()=>{let t=()=>{let t,e;if(!f.current.element)return;let{left:r,top:n,width:s,height:a,bottom:l,right:h,x:u,y:c}=f.current.element.getBoundingClientRect(),p={left:r,top:n,width:s,height:a,bottom:l,right:h,x:u,y:c};f.current.element instanceof HTMLElement&&i&&(p.height=f.current.element.offsetHeight,p.width=f.current.element.offsetWidth),Object.freeze(p),m.current&&(t=f.current.lastBounds,e=p,!o.every(r=>t[r]===e[r]))&&d(f.current.lastBounds=p)};return[t,g?a(t,g):t,p?a(t,p):t]},[d,i,p,g]);function x(){f.current.scrollContainers&&(f.current.scrollContainers.forEach(t=>t.removeEventListener("scroll",y,!0)),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null),f.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",f.current.orientationHandler))}function w(){f.current.element&&(f.current.resizeObserver=new u(y),f.current.resizeObserver.observe(f.current.element),e&&f.current.scrollContainers&&f.current.scrollContainers.forEach(t=>t.addEventListener("scroll",y,{capture:!0,passive:!0})),f.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",f.current.orientationHandler))}return s=y,l=!!e,(0,n.useEffect)(()=>{if(l)return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)},[s,l]),h=v,(0,n.useEffect)(()=>(window.addEventListener("resize",h),()=>void window.removeEventListener("resize",h)),[h]),(0,n.useEffect)(()=>{x(),w()},[e,y,v]),(0,n.useEffect)(()=>x,[]),[t=>{t&&t!==f.current.element&&(x(),f.current.element=t,f.current.scrollContainers=function t(e){let r=[];if(!e||e===document.body)return r;let{overflow:i,overflowX:n,overflowY:s}=window.getComputedStyle(e);return[i,n,s].some(t=>"auto"===t||"scroll"===t)&&r.push(e),[...r,...t(e.parentElement)]}(t),w())},c,b]}({scroll:!0,debounce:{scroll:50,resize:0},...l}),F=n.useRef(null),R=n.useRef(null);n.useImperativeHandle(t,()=>F.current);let k=(0,i.a)(S),[L,I]=n.useState(!1),[z,B]=n.useState(!1);if(L)throw L;if(z)throw z;let D=n.useRef(null);(0,i.b)(()=>{let t=F.current;T.width>0&&T.height>0&&t&&(D.current||(D.current=(0,i.c)(t)),async function(){await D.current.configure({gl:c,scene:C,events:d,shadows:g,linear:m,flat:b,legacy:v,orthographic:y,frameloop:x,dpr:w,performance:M,raycaster:_,camera:E,size:T,onPointerMissed:(...t)=>null==k.current?void 0:k.current(...t),onCreated:t=>{null==t.events.connect||t.events.connect(f?(0,i.i)(f)?f.current:f:R.current),p&&t.setEvents({compute:(t,e)=>{let r=t[p+"X"],i=t[p+"Y"];e.pointer.set(r/e.size.width*2-1,-(2*(i/e.size.height))+1),e.raycaster.setFromCamera(e.pointer,e.camera)}}),null==A||A(t)}}),D.current.render((0,h.jsx)(O,{children:(0,h.jsx)(i.E,{set:B,children:(0,h.jsx)(n.Suspense,{fallback:(0,h.jsx)(i.B,{set:I}),children:null!=e?e:null})})}))}())}),n.useEffect(()=>{let t=F.current;if(t)return()=>(0,i.d)(t)},[]);let N=f?"none":"auto";return(0,h.jsx)("div",{ref:R,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:N,...u},...j,children:(0,h.jsx)("div",{ref:P,style:{width:"100%",height:"100%"},children:(0,h.jsx)("canvas",{ref:F,style:{display:"block"},children:r})})})}function c(t){return(0,h.jsx)(l.Af,{children:(0,h.jsx)(u,{...t})})}r(8870),r(8807),r(4943)},623:(t,e,r)=>{r.d(e,{b:()=>n});var i=r(7548);function n(t,e,r,n){var s;return(s=class extends i.ShaderMaterial{constructor(s){for(let n in super({vertexShader:e,fragmentShader:r,...s}),t)this.uniforms[n]=new i.Uniform(t[n]),Object.defineProperty(this,n,{get(){return this.uniforms[n].value},set(t){this.uniforms[n].value=t}});this.uniforms=i.UniformsUtils.clone(this.uniforms),null==n||n(this)}}).key=i.MathUtils.generateUUID(),s}},979:(t,e)=>{function r(t,e){var r=t.length;for(t.push(e);0<r;){var i=r-1>>>1,n=t[i];if(0<s(n,e))t[i]=e,t[r]=n,r=i;else break}}function i(t){return 0===t.length?null:t[0]}function n(t){if(0===t.length)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;for(var i=0,n=t.length,a=n>>>1;i<a;){var o=2*(i+1)-1,l=t[o],h=o+1,u=t[h];if(0>s(l,r))h<n&&0>s(u,l)?(t[i]=u,t[h]=r,i=h):(t[i]=l,t[o]=r,i=o);else if(h<n&&0>s(u,r))t[i]=u,t[h]=r,i=h;else break}}return e}function s(t,e){var r=t.sortIndex-e.sortIndex;return 0!==r?r:t.id-e.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a,o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();e.unstable_now=function(){return l.now()-h}}var u=[],c=[],d=1,f=null,p=3,g=!1,m=!1,b=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function w(t){for(var e=i(c);null!==e;){if(null===e.callback)n(c);else if(e.startTime<=t)n(c),e.sortIndex=e.expirationTime,r(u,e);else break;e=i(c)}}function M(t){if(b=!1,w(t),!m)if(null!==i(u))m=!0,T();else{var e=i(c);null!==e&&F(M,e.startTime-t)}}var _=!1,E=-1,C=5,S=-1;function A(){return!(e.unstable_now()-S<C)}function j(){if(_){var t=e.unstable_now();S=t;var r=!0;try{t:{m=!1,b&&(b=!1,y(E),E=-1),g=!0;var s=p;try{e:{for(w(t),f=i(u);null!==f&&!(f.expirationTime>t&&A());){var o=f.callback;if("function"==typeof o){f.callback=null,p=f.priorityLevel;var l=o(f.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof l){f.callback=l,w(t),r=!0;break e}f===i(u)&&n(u),w(t)}else n(u);f=i(u)}if(null!==f)r=!0;else{var h=i(c);null!==h&&F(M,h.startTime-t),r=!1}}break t}finally{f=null,p=s,g=!1}}}finally{r?a():_=!1}}}if("function"==typeof x)a=function(){x(j)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,P=O.port2;O.port1.onmessage=j,a=function(){P.postMessage(null)}}else a=function(){v(j,0)};function T(){_||(_=!0,a())}function F(t,r){E=v(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||g||(m=!0,T())},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return i(u)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var r=p;p=e;try{return t()}finally{p=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=p;p=t;try{return e()}finally{p=r}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=0x3fffffff;break;case 4:o=1e4;break;default:o=5e3}return o=s+o,t={id:d++,callback:n,priorityLevel:t,startTime:s,expirationTime:o,sortIndex:-1},s>a?(t.sortIndex=s,r(c,t),null===i(u)&&t===i(c)&&(b?(y(E),E=-1):b=!0,F(M,s-a))):(t.sortIndex=o,r(u,t),m||g||(m=!0,T())),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=p;return function(){var r=p;p=e;try{return t.apply(this,arguments)}finally{p=r}}}},1150:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return l}});let i=r(5155),n=r(2115),s=r(4437);function a(t){return{default:t&&"default"in t?t.default:t}}r(6552);let o={loader:()=>Promise.resolve(a(()=>null)),loading:null,ssr:!0},l=function(t){let e={...o,...t},r=(0,n.lazy)(()=>e.loader().then(a)),l=e.loading;function h(t){let a=l?(0,i.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,o=!e.ssr||!!e.loading,h=o?n.Suspense:n.Fragment,u=e.ssr?(0,i.jsxs)(i.Fragment,{children:[null,(0,i.jsx)(r,{...t})]}):(0,i.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,i.jsx)(r,{...t})});return(0,i.jsx)(h,{...o?{fallback:a}:{},children:u})}return h.displayName="LoadableComponent",h}},1547:(t,e,r)=>{r.d(e,{N:()=>l});var i=r(2115),n=r(4877),s=r(7548);let a=t=>Math.sqrt(1-Math.pow(t-1,2));class o{constructor({size:t=256,maxAge:e=750,radius:r=.3,intensity:i=.2,interpolate:n=0,smoothing:s=0,minForce:o=.3,blend:l="screen",ease:h=a}={}){this.size=t,this.maxAge=e,this.radius=r,this.intensity=i,this.ease=h,this.interpolate=n,this.smoothing=s,this.minForce=o,this.blend=l,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size;let t=this.canvas.getContext("2d");if(null===t)throw Error("2D not available");this.ctx=t,this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new s.Texture(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(t){this.clear(),this.trail.forEach((e,r)=>{e.age+=1e3*t,e.age>this.maxAge&&this.trail.splice(r,1)}),this.trail.length||(this.force=0),this.trail.forEach(t=>{this.drawTouch(t)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(t){let e=this.trail[this.trail.length-1];if(e){let r=e.x-t.x,i=e.y-t.y,n=r*r+i*i,s=Math.max(this.minForce,Math.min(1e4*n,1));if(this.force=function(t,e,r=.9){return e*r+t*(1-r)}(s,this.force,this.smoothing),this.interpolate){let t=Math.ceil(n/Math.pow(.5*this.radius/this.interpolate,2));if(t>1)for(let n=1;n<t;n++)this.trail.push({x:e.x-r/t*n,y:e.y-i/t*n,age:0,force:s})}}this.trail.push({x:t.x,y:t.y,age:0,force:this.force})}drawTouch(t){let e={x:t.x*this.size,y:(1-t.y)*this.size},r=1;r=(t.age<.3*this.maxAge?this.ease(t.age/(.3*this.maxAge)):this.ease(1-(t.age-.3*this.maxAge)/(.7*this.maxAge)))*t.force,this.ctx.globalCompositeOperation=this.blend;let i=this.size*this.radius*r,n=this.ctx.createRadialGradient(e.x,e.y,Math.max(0,.25*i),e.x,e.y,Math.max(0,i));n.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),n.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=n,this.ctx.arc(e.x,e.y,Math.max(0,i),0,2*Math.PI),this.ctx.fill()}}function l(t={}){let{size:e,maxAge:r,radius:s,intensity:a,interpolate:h,smoothing:u,minForce:c,blend:d,ease:f}=t,p=(0,i.useMemo)(()=>new o(t),[e,r,s,a,h,u,c,d,f]);(0,n.D)((t,e)=>void p.update(e));let g=(0,i.useCallback)(t=>p.addTouch(t.uv),[p]);return[p.texture,g]}},1774:(t,e,r)=>{r.d(e,{l:()=>h});var i=r(3170);let n=new i.e,s=1,a=1,o=!1;class l{constructor(t,e={}){for(let r in t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=e,this.id=s++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state,e)this.addAttribute(r,e[r])}addAttribute(t,e){if(this.attributes[t]=e,e.id=a++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target="index"===t?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalized=e.normalized||!1,e.stride=e.stride||0,e.offset=e.offset||0,e.count=e.count||(e.stride?e.data.byteLength/e.stride:e.data.length/e.size),e.divisor=e.instanced||0,e.needsUpdate=!1,e.usage=e.usage||this.gl.STATIC_DRAW,e.buffer||this.updateAttribute(e),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else"index"===t?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}updateAttribute(t){let e=!t.buffer;e&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),e?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((t,{name:e,type:r})=>{if(!this.attributes[e])return void console.warn(`active attribute ${e} not being supplied`);let i=this.attributes[e];this.gl.bindBuffer(i.target,i.buffer),this.glState.boundBuffer=i.buffer;let n=1;35674===r&&(n=2),35675===r&&(n=3),35676===r&&(n=4);let s=i.size/n,a=1===n?0:n*n*4,o=1===n?0:4*n;for(let e=0;e<n;e++)this.gl.vertexAttribPointer(t+e,s,i.type,i.normalized,i.stride+a,i.offset+e*o),this.gl.enableVertexAttribArray(t+e),this.gl.renderer.vertexAttribDivisor(t+e,i.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:e=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((t,{name:e})=>{let r=this.attributes[e];r.needsUpdate&&this.updateAttribute(r)});let r=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(r=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r,this.instancedCount):this.gl.renderer.drawArraysInstanced(e,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*r):this.gl.drawArrays(e,this.drawRange.start,this.drawRange.count)}getPosition(){let t=this.attributes.position;return t.data?t:o?void 0:(console.warn("No position buffer data found to compute bounds"),o=!0)}computeBoundingBox(t){t||(t=this.getPosition());let e=t.data,r=t.size;this.bounds||(this.bounds={min:new i.e,max:new i.e,center:new i.e,scale:new i.e,radius:1/0});let n=this.bounds.min,s=this.bounds.max,a=this.bounds.center,o=this.bounds.scale;n.set(Infinity),s.set(-1/0);for(let t=0,i=e.length;t<i;t+=r){let r=e[t],i=e[t+1],a=e[t+2];n.x=Math.min(r,n.x),n.y=Math.min(i,n.y),n.z=Math.min(a,n.z),s.x=Math.max(r,s.x),s.y=Math.max(i,s.y),s.z=Math.max(a,s.z)}o.sub(s,n),a.add(n,s).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());let e=t.data,r=t.size;this.bounds||this.computeBoundingBox(t);let i=0;for(let t=0,s=e.length;t<s;t+=r)n.fromArray(e,t),i=Math.max(i,this.bounds.center.squaredDistance(n));this.bounds.radius=Math.sqrt(i)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}class h extends l{constructor(t,{attributes:e={}}={}){Object.assign(e,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(t,e)}}},1975:(t,e)=>{e.ConcurrentRoot=1,e.ContinuousEventPriority=8,e.DefaultEventPriority=32,e.DiscreteEventPriority=2},3170:(t,e,r)=>{r.d(e,{e:()=>n});var i=r(9170);class n extends Array{constructor(t=0,e=t,r=t){return super(t,e,r),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,e=t,r=t){return t.length?this.copy(t):(i.hZ(this,t,e,r),this)}copy(t){return i.C(this,t),this}add(t,e){return e?i.WQ(this,t,e):i.WQ(this,this,t),this}sub(t,e){return e?i.Re(this,t,e):i.Re(this,this,t),this}multiply(t){return t.length?i.lw(this,this,t):i.hs(this,this,t),this}divide(t){return t.length?i.Qr(this,this,t):i.hs(this,this,1/t),this}inverse(t=this){return i.DI(this,t),this}len(){return i.Bw(this)}distance(t){return t?i.Io(this,t):i.Bw(this)}squaredLen(){return i.m3(this)}squaredDistance(t){return t?i.hG(this,t):i.m3(this)}negate(t=this){return i.ze(this,t),this}cross(t,e){return e?i.$A(this,t,e):i.$A(this,this,t),this}scale(t){return i.hs(this,this,t),this}normalize(){return i.S8(this,this),this}dot(t){return i.Om(this,t)}equals(t){return i.t2(this,t)}applyMatrix3(t){return i.ei(this,this,t),this}applyMatrix4(t){return i.Z0(this,this,t),this}scaleRotateMatrix4(t){return i.Sc(this,this,t),this}applyQuaternion(t){return i.gL(this,this,t),this}angle(t){return i.g7(this,t)}lerp(t,e){return i.Cc(this,this,t,e),this}smoothLerp(t,e,r){return i.YO(this,this,t,e,r),this}clone(){return new n(this[0],this[1],this[2])}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}transformDirection(t){let e=this[0],r=this[1],i=this[2];return this[0]=t[0]*e+t[4]*r+t[8]*i,this[1]=t[1]*e+t[5]*r+t[9]*i,this[2]=t[2]*e+t[6]*r+t[10]*i,this.normalize()}}},3654:(t,e,r)=>{var i=r(2115),n=r(4806),s="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},a=n.useSyncExternalStore,o=i.useRef,l=i.useEffect,h=i.useMemo,u=i.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,r,i,n){var c=o(null);if(null===c.current){var d={hasValue:!1,value:null};c.current=d}else d=c.current;var f=a(t,(c=h(function(){function t(t){if(!l){if(l=!0,a=t,t=i(t),void 0!==n&&d.hasValue){var e=d.value;if(n(e,t))return o=e}return o=t}if(e=o,s(a,t))return e;var r=i(t);return void 0!==n&&n(e,r)?(a=t,e):(a=t,o=r)}var a,o,l=!1,h=void 0===r?null:r;return[function(){return t(e())},null===h?void 0:function(){return t(h())}]},[e,r,i,n]))[0],c[1]);return l(function(){d.hasValue=!0,d.value=f},[f]),u(f),f}},4004:(t,e)=>{function r(t,e){var r=t.length;for(t.push(e);0<r;){var i=r-1>>>1,n=t[i];if(0<s(n,e))t[i]=e,t[r]=n,r=i;else break}}function i(t){return 0===t.length?null:t[0]}function n(t){if(0===t.length)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;for(var i=0,n=t.length,a=n>>>1;i<a;){var o=2*(i+1)-1,l=t[o],h=o+1,u=t[h];if(0>s(l,r))h<n&&0>s(u,l)?(t[i]=u,t[h]=r,i=h):(t[i]=l,t[o]=r,i=o);else if(h<n&&0>s(u,r))t[i]=u,t[h]=r,i=h;else break}}return e}function s(t,e){var r=t.sortIndex-e.sortIndex;return 0!==r?r:t.id-e.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a,o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();e.unstable_now=function(){return l.now()-h}}var u=[],c=[],d=1,f=null,p=3,g=!1,m=!1,b=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function w(t){for(var e=i(c);null!==e;){if(null===e.callback)n(c);else if(e.startTime<=t)n(c),e.sortIndex=e.expirationTime,r(u,e);else break;e=i(c)}}function M(t){if(b=!1,w(t),!m)if(null!==i(u))m=!0,T();else{var e=i(c);null!==e&&F(M,e.startTime-t)}}var _=!1,E=-1,C=5,S=-1;function A(){return!(e.unstable_now()-S<C)}function j(){if(_){var t=e.unstable_now();S=t;var r=!0;try{t:{m=!1,b&&(b=!1,y(E),E=-1),g=!0;var s=p;try{e:{for(w(t),f=i(u);null!==f&&!(f.expirationTime>t&&A());){var o=f.callback;if("function"==typeof o){f.callback=null,p=f.priorityLevel;var l=o(f.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof l){f.callback=l,w(t),r=!0;break e}f===i(u)&&n(u),w(t)}else n(u);f=i(u)}if(null!==f)r=!0;else{var h=i(c);null!==h&&F(M,h.startTime-t),r=!1}}break t}finally{f=null,p=s,g=!1}}}finally{r?a():_=!1}}}if("function"==typeof x)a=function(){x(j)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,P=O.port2;O.port1.onmessage=j,a=function(){P.postMessage(null)}}else a=function(){v(j,0)};function T(){_||(_=!0,a())}function F(t,r){E=v(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||g||(m=!0,T())},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return i(u)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var r=p;p=e;try{return t()}finally{p=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=p;p=t;try{return e()}finally{p=r}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=0x3fffffff;break;case 4:o=1e4;break;default:o=5e3}return o=s+o,t={id:d++,callback:n,priorityLevel:t,startTime:s,expirationTime:o,sortIndex:-1},s>a?(t.sortIndex=s,r(c,t),null===i(u)&&t===i(c)&&(b?(y(E),E=-1):b=!0,F(M,s-a))):(t.sortIndex=o,r(u,t),m||g||(m=!0,T())),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=p;return function(){var r=p;p=e;try{return t.apply(this,arguments)}finally{p=r}}}},4054:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),!function(t,e){for(var r in e)Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}(e,{bindSnapshot:function(){return a},createAsyncLocalStorage:function(){return s},createSnapshot:function(){return o}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class i{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(t){return t}}let n="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function s(){return n?new n:new i}function a(t){return n?n.bind(t):i.bind(t)}function o(){return n?n.snapshot():function(t,...e){return t(...e)}}},4357:(t,e,r)=>{r.d(e,{A:()=>s});let i=new(r(3170)).e,n=1;class s{constructor({canvas:t=document.createElement("canvas"),width:e=300,height:r=150,dpr:i=1,alpha:s=!1,depth:a=!0,stencil:o=!1,antialias:l=!1,premultipliedAlpha:h=!1,preserveDrawingBuffer:u=!1,powerPreference:c="default",autoClear:d=!0,webgl:f=2}={}){let p={alpha:s,depth:a,stencil:o,antialias:l,premultipliedAlpha:h,preserveDrawingBuffer:u,powerPreference:c};this.dpr=i,this.alpha=s,this.color=!0,this.depth=a,this.stencil=o,this.premultipliedAlpha=h,this.autoClear=d,this.id=n++,2===f&&(this.gl=t.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(e,r),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}setViewport(t,e,r=0,i=0){(this.state.viewport.width!==t||this.state.viewport.height!==e)&&(this.state.viewport.width=t,this.state.viewport.height=e,this.state.viewport.x=r,this.state.viewport.y=i,this.gl.viewport(r,i,t,e))}setScissor(t,e,r=0,i=0){this.gl.scissor(r,i,t,e)}enable(t){!0!==this.state[t]&&(this.gl.enable(t),this.state[t]=!0)}disable(t){!1!==this.state[t]&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,e,r,i){(this.state.blendFunc.src!==t||this.state.blendFunc.dst!==e||this.state.blendFunc.srcAlpha!==r||this.state.blendFunc.dstAlpha!==i)&&(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=r,this.state.blendFunc.dstAlpha=i,void 0!==r?this.gl.blendFuncSeparate(t,e,r,i):this.gl.blendFunc(t,e))}setBlendEquation(t,e){t=t||this.gl.FUNC_ADD,(this.state.blendEquation.modeRGB!==t||this.state.blendEquation.modeAlpha!==e)&&(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,void 0!==e?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}setStencilMask(t){this.state.stencilMask!==t&&(this.state.stencilMask=t,this.gl.stencilMask(t))}setStencilFunc(t,e,r){(this.state.stencilFunc!==t||this.state.stencilRef!==e||this.state.stencilFuncMask!==r)&&(this.state.stencilFunc=t||this.gl.ALWAYS,this.state.stencilRef=e||0,this.state.stencilFuncMask=r||0,this.gl.stencilFunc(t||this.gl.ALWAYS,e||0,r||0))}setStencilOp(t,e,r){(this.state.stencilFail!==t||this.state.stencilDepthFail!==e||this.state.stencilDepthPass!==r)&&(this.state.stencilFail=t,this.state.stencilDepthFail=e,this.state.stencilDepthPass=r,this.gl.stencilOp(t,e,r))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:e=null}={}){this.state.framebuffer!==e&&(this.state.framebuffer=e,this.gl.bindFramebuffer(t,e))}getExtension(t,e,r){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e)?this.extensions[t]?this.extensions[t][r].bind(this.extensions[t]):null:this.extensions[t]}sortOpaque(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:t.zDepth!==e.zDepth?t.zDepth-e.zDepth:e.id-t.id}sortTransparent(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.zDepth!==e.zDepth?e.zDepth-t.zDepth:e.id-t.id}sortUI(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:e.id-t.id}getRenderList({scene:t,camera:e,frustumCull:r,sort:n}){let s=[];if(e&&r&&e.updateFrustum(),t.traverse(t=>{if(!t.visible)return!0;t.draw&&(!r||!t.frustumCulled||!e||e.frustumIntersectsMesh(t))&&s.push(t)}),n){let t=[],r=[],n=[];s.forEach(s=>{s.program.transparent?s.program.depthTest?r.push(s):n.push(s):t.push(s),s.zDepth=0,0===s.renderOrder&&s.program.depthTest&&e&&(s.worldMatrix.getTranslation(i),i.applyMatrix4(e.projectionViewMatrix),s.zDepth=i.z)}),t.sort(this.sortOpaque),r.sort(this.sortTransparent),n.sort(this.sortUI),s=t.concat(r,n)}return s}render({scene:t,camera:e,target:r=null,update:i=!0,sort:n=!0,frustumCull:s=!0,clear:a}){null===r?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(r),this.setViewport(r.width,r.height)),(a||this.autoClear&&!1!==a)&&(this.depth&&(!r||r.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!r||r.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),i&&t.updateMatrixWorld(),e&&e.updateMatrixWorld(),this.getRenderList({scene:t,camera:e,frustumCull:s,sort:n}).forEach(t=>{t.draw({camera:e})})}}},4437:(t,e,r)=>{function i(t){let{reason:e,children:r}=t;return r}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BailoutToCSR",{enumerable:!0,get:function(){return i}}),r(4553)},4735:(t,e,r)=>{r.d(e,{Af:()=>o,Nz:()=>n,u5:()=>l,y3:()=>c});var i=r(2115);function n(t,e,r){if(!t)return;if(!0===r(t))return t;let i=e?t.return:t.child;for(;i;){let t=n(i,e,r);if(t)return t;i=e?null:i.sibling}}function s(t){try{return Object.defineProperties(t,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(e){return t}}(()=>{var t,e;return"undefined"!=typeof window&&((null==(t=window.document)?void 0:t.createElement)||(null==(e=window.navigator)?void 0:e.product)==="ReactNative")})()?i.useLayoutEffect:i.useEffect;let a=s(i.createContext(null));class o extends i.Component{render(){return i.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function l(){let t=i.useContext(a);if(null===t)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let e=i.useId();return i.useMemo(()=>{for(let r of[t,null==t?void 0:t.alternate]){if(!r)continue;let t=n(r,!1,t=>{let r=t.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(t)return t}},[t,e])}let h=Symbol.for("react.context"),u=t=>null!==t&&"object"==typeof t&&"$$typeof"in t&&t.$$typeof===h;function c(){let t=function(){let t=l(),[e]=i.useState(()=>new Map);e.clear();let r=t;for(;r;){let t=r.type;u(t)&&t!==a&&!e.has(t)&&e.set(t,i.use(s(t))),r=r.return}return e}();return i.useMemo(()=>Array.from(t.keys()).reduce((e,r)=>n=>i.createElement(e,null,i.createElement(r.Provider,{...n,value:t.get(r)})),t=>i.createElement(o,{...t})),[t])}},4806:(t,e,r)=>{t.exports=r(125)},4877:(t,e,r)=>{let i,n,s,a,o;r.d(e,{B:()=>P,C:()=>J,D:()=>tt,E:()=>T,a:()=>j,b:()=>A,c:()=>t_,d:()=>tC,e:()=>tl,f:()=>tB,i:()=>C,u:()=>O});var l=r(2115),h=r.t(l,2),u=r(8870),c=r(7548),d=r(8828);let f=t=>{let e,r=new Set,i=(t,i)=>{let n="function"==typeof t?t(e):t;if(!Object.is(n,e)){let t=e;e=(null!=i?i:"object"!=typeof n||null===n)?n:Object.assign({},e,n),r.forEach(r=>r(e,t))}},n=()=>e,s={setState:i,getState:n,getInitialState:()=>a,subscribe:t=>(r.add(t),()=>r.delete(t))},a=e=t(i,n,s);return s},{useSyncExternalStoreWithSelector:p}=d,g=(t,e)=>{let r=(t=>t?f(t):f)(t),i=(t,i=e)=>(function(t,e=t=>t,r){let i=p(t.subscribe,t.getState,t.getInitialState,e,r);return l.useDebugValue(i),i})(r,t,i);return Object.assign(i,r),i},m=[];function b(t,e,r=(t,e)=>t===e){if(t===e)return!0;if(!t||!e)return!1;let i=t.length;if(e.length!==i)return!1;for(let n=0;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}function v(t,e=null,r=!1,i={}){for(let n of(null===e&&(e=[t]),m))if(b(e,n.keys,n.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(n,"error"))throw n.error;if(Object.prototype.hasOwnProperty.call(n,"response"))return i.lifespan&&i.lifespan>0&&(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(n.remove,i.lifespan)),n.response;if(!r)throw n.promise}let n={keys:e,equal:i.equal,remove:()=>{let t=m.indexOf(n);-1!==t&&m.splice(t,1)},promise:("object"==typeof t&&"function"==typeof t.then?t:t(...e)).then(t=>{n.response=t,i.lifespan&&i.lifespan>0&&(n.timeout=setTimeout(n.remove,i.lifespan))}).catch(t=>n.error=t)};if(m.push(n),!r)throw n.promise}var y=r(8807),x=r.n(y),w=r(4943),M=r(5155),_=r(4735);function E(t){let e=t.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}r(5704),h.act;let C=t=>t&&t.hasOwnProperty("current"),S=t=>null!=t&&("string"==typeof t||"number"==typeof t||t.isColor),A=((t,e)=>"undefined"!=typeof window&&((null==(t=window.document)?void 0:t.createElement)||(null==(e=window.navigator)?void 0:e.product)==="ReactNative"))()?l.useLayoutEffect:l.useEffect;function j(t){let e=l.useRef(t);return A(()=>void(e.current=t),[t]),e}function O(){let t=(0,_.u5)(),e=(0,_.y3)();return l.useMemo(()=>({children:r})=>{let i=(0,_.Nz)(t,!0,t=>t.type===l.StrictMode)?l.StrictMode:l.Fragment;return(0,M.jsx)(i,{children:(0,M.jsx)(e,{children:r})})},[t,e])}function P({set:t}){return A(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}let T=(t=>((t=class extends l.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),t))();function F(t){var e;let r="undefined"!=typeof window?null!=(e=window.devicePixelRatio)?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],r),t[1]):t}function R(t){var e;return null==(e=t.__r3f)?void 0:e.root.getState()}let k={obj:t=>t===Object(t)&&!k.arr(t)&&"function"!=typeof t,fun:t=>"function"==typeof t,str:t=>"string"==typeof t,num:t=>"number"==typeof t,boo:t=>"boolean"==typeof t,und:t=>void 0===t,nul:t=>null===t,arr:t=>Array.isArray(t),equ(t,e,{arrays:r="shallow",objects:i="reference",strict:n=!0}={}){let s;if(typeof t!=typeof e||!!t!=!!e)return!1;if(k.str(t)||k.num(t)||k.boo(t))return t===e;let a=k.obj(t);if(a&&"reference"===i)return t===e;let o=k.arr(t);if(o&&"reference"===r)return t===e;if((o||a)&&t===e)return!0;for(s in t)if(!(s in e))return!1;if(a&&"shallow"===r&&"shallow"===i){for(s in n?e:t)if(!k.equ(t[s],e[s],{strict:n,objects:"reference"}))return!1}else for(s in n?e:t)if(t[s]!==e[s])return!1;if(k.und(s)){if(o&&0===t.length&&0===e.length||a&&0===Object.keys(t).length&&0===Object.keys(e).length)return!0;if(t!==e)return!1}return!0}},L=["children","key","ref"];function I(t,e,r,i){let n=null==t?void 0:t.__r3f;return!n&&(n={root:e,type:r,parent:null,children:[],props:function(t){let e={};for(let r in t)L.includes(r)||(e[r]=t[r]);return e}(i),object:t,eventCount:0,handlers:{},isHidden:!1},t&&(t.__r3f=n)),n}function z(t,e){let r=t[e];if(!e.includes("-"))return{root:t,key:e,target:r};for(let n of(r=t,e.split("-"))){var i;e=n,t=r,r=null==(i=r)?void 0:i[e]}return{root:t,key:e,target:r}}let B=/-\d+$/;function D(t,e){if(k.str(e.props.attach)){if(B.test(e.props.attach)){let r=e.props.attach.replace(B,""),{root:i,key:n}=z(t.object,r);Array.isArray(i[n])||(i[n]=[])}let{root:r,key:i}=z(t.object,e.props.attach);e.previousAttach=r[i],r[i]=e.object}else k.fun(e.props.attach)&&(e.previousAttach=e.props.attach(t.object,e.object))}function N(t,e){if(k.str(e.props.attach)){let{root:r,key:i}=z(t.object,e.props.attach),n=e.previousAttach;void 0===n?delete r[i]:r[i]=n}else null==e.previousAttach||e.previousAttach(t.object,e.object);delete e.previousAttach}let q=[...L,"args","dispose","attach","object","onUpdate","dispose"],U=new Map,V=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],H=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function G(t,e){var r,i;let n=t.__r3f,s=n&&E(n).getState(),a=null==n?void 0:n.eventCount;for(let r in e){let a=e[r];if(q.includes(r))continue;if(n&&H.test(r)){"function"==typeof a?n.handlers[r]=a:delete n.handlers[r],n.eventCount=Object.keys(n.handlers).length;continue}if(void 0===a)continue;let{root:o,key:l,target:h}=z(t,r);h instanceof c.Layers&&a instanceof c.Layers?h.mask=a.mask:h instanceof c.Color&&S(a)?h.set(a):null!==h&&"object"==typeof h&&"function"==typeof h.set&&"function"==typeof h.copy&&null!=a&&a.constructor&&h.constructor===a.constructor?h.copy(a):null!==h&&"object"==typeof h&&"function"==typeof h.set&&Array.isArray(a)?"function"==typeof h.fromArray?h.fromArray(a):h.set(...a):null!==h&&"object"==typeof h&&"function"==typeof h.set&&"number"==typeof a?"function"==typeof h.setScalar?h.setScalar(a):h.set(a):(o[l]=a,s&&!s.linear&&V.includes(l)&&null!=(i=o[l])&&i.isTexture&&o[l].format===c.RGBAFormat&&o[l].type===c.UnsignedByteType&&(o[l].colorSpace=c.SRGBColorSpace))}if(null!=n&&n.parent&&null!=s&&s.internal&&null!=(r=n.object)&&r.isObject3D&&a!==n.eventCount){let t=n.object,e=s.internal.interaction.indexOf(t);e>-1&&s.internal.interaction.splice(e,1),n.eventCount&&null!==t.raycast&&s.internal.interaction.push(t)}return n&&void 0===n.props.attach&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&W(n),t}function W(t){var e;if(!t.parent)return;null==t.props.onUpdate||t.props.onUpdate(t.object);let r=null==(e=t.root)||null==e.getState?void 0:e.getState();r&&0===r.internal.frames&&r.invalidate()}let X=t=>null==t?void 0:t.isObject3D;function Y(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function $(t,e,r,i){let n=r.get(e);n&&(r.delete(e),0===r.size&&(t.delete(i),n.target.releasePointerCapture(i)))}let Z=t=>!!(null!=t&&t.render),Q=l.createContext(null);function K(){let t=l.useContext(Q);if(!t)throw Error("R3F: Hooks can only be used within the Canvas component!");return t}function J(t=t=>t,e){return K()(t,e)}function tt(t,e=0){let r=K(),i=r.getState().internal.subscribe,n=j(t);return A(()=>i(n,e,r),[e,i,r]),null}let te=new WeakMap;function tr(t,e){return function(r,...i){var n;let s;return"function"==typeof r&&(null==r||null==(n=r.prototype)?void 0:n.constructor)===r?(s=te.get(r))||(s=new r,te.set(r,s)):s=r,t&&t(s),Promise.all(i.map(t=>new Promise((r,i)=>s.load(t,t=>{X(null==t?void 0:t.scene)&&Object.assign(t,function(t){let e={nodes:{},materials:{},meshes:{}};return t&&t.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}(t.scene)),r(t)},e,e=>i(Error(`Could not load ${t}: ${null==e?void 0:e.message}`))))))}}function ti(t,e,r,i){let n=Array.isArray(e)?e:[e],s=v(tr(r,i),[t,...n],!1,{equal:k.equ});return Array.isArray(e)?s:s[0]}ti.preload=function(t,e,r){let i,n=Array.isArray(e)?e:[e];v(tr(r),[t,...n],!0,i)},ti.clear=function(t,e){var r=[t,...Array.isArray(e)?e:[e]];if(void 0===r||0===r.length)m.splice(0,m.length);else{let t=m.find(t=>b(r,t.keys,t.equal));t&&t.remove()}};let tn={},ts=/^three(?=[A-Z])/,ta=t=>`${t[0].toUpperCase()}${t.slice(1)}`,to=0;function tl(t){if("function"==typeof t){let e=`${to++}`;return tn[e]=t,e}Object.assign(tn,t)}function th(t,e){let r=ta(t),i=tn[r];if("primitive"!==t&&!i)throw Error(`R3F: ${r} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if("primitive"===t&&!e.object)throw Error("R3F: Primitives without 'object' are invalid!");if(void 0!==e.args&&!Array.isArray(e.args))throw Error("R3F: The args prop must be an array!")}function tu(t){if(t.isHidden){var e;t.props.attach&&null!=(e=t.parent)&&e.object?D(t.parent,t):X(t.object)&&!1!==t.props.visible&&(t.object.visible=!0),t.isHidden=!1,W(t)}}function tc(t,e,r){let i=e.root.getState();if(t.parent||t.object===i.scene){if(!e.object){var n,s;let t=tn[ta(e.type)];e.object=null!=(n=e.props.object)?n:new t(...null!=(s=e.props.args)?s:[]),e.object.__r3f=e}if(G(e.object,e.props),e.props.attach)D(t,e);else if(X(e.object)&&X(t.object)){let i=t.object.children.indexOf(null==r?void 0:r.object);if(r&&-1!==i){let r=t.object.children.indexOf(e.object);-1!==r?(t.object.children.splice(r,1),t.object.children.splice(r<i?i-1:i,0,e.object)):(e.object.parent=t.object,t.object.children.splice(i,0,e.object),e.object.dispatchEvent({type:"added"}),t.object.dispatchEvent({type:"childadded",child:e.object}))}else t.object.add(e.object)}for(let t of e.children)tc(e,t);W(e)}}function td(t,e){e&&(e.parent=t,t.children.push(e),tc(t,e))}function tf(t,e,r){if(!e||!r)return;e.parent=t;let i=t.children.indexOf(r);-1!==i?t.children.splice(i,0,e):t.children.push(e),tc(t,e,r)}function tp(t){if("function"==typeof t.dispose){let e=()=>{try{t.dispose()}catch{}};"undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?e():(0,w.unstable_scheduleCallback)(w.unstable_IdlePriority,e)}}function tg(t,e,r){if(!e)return;e.parent=null;let i=t.children.indexOf(e);-1!==i&&t.children.splice(i,1),e.props.attach?N(t,e):X(e.object)&&X(t.object)&&(t.object.remove(e.object),function(t,e){let{internal:r}=t.getState();r.interaction=r.interaction.filter(t=>t!==e),r.initialHits=r.initialHits.filter(t=>t!==e),r.hovered.forEach((t,i)=>{(t.eventObject===e||t.object===e)&&r.hovered.delete(i)}),r.capturedMap.forEach((t,i)=>{$(r.capturedMap,e,t,i)})}(E(e),e.object));let n=null!==e.props.dispose&&!1!==r;for(let t=e.children.length-1;t>=0;t--){let r=e.children[t];tg(e,r,n)}e.children.length=0,delete e.object.__r3f,n&&"primitive"!==e.type&&"Scene"!==e.object.type&&tp(e.object),void 0===r&&W(e)}let tm=[],tb=()=>{},tv={},ty=0,tx=function(t){let e=x()(t);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:l.version}),e}({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(t,e,r){var i;return th(t=ta(t)in tn?t:t.replace(ts,""),e),"primitive"===t&&null!=(i=e.object)&&i.__r3f&&delete e.object.__r3f,I(e.object,r,t,e)},removeChild:tg,appendChild:td,appendInitialChild:td,insertBefore:tf,appendChildToContainer(t,e){let r=t.getState().scene.__r3f;e&&r&&td(r,e)},removeChildFromContainer(t,e){let r=t.getState().scene.__r3f;e&&r&&tg(r,e)},insertInContainerBefore(t,e,r){let i=t.getState().scene.__r3f;e&&r&&i&&tf(i,e,r)},getRootHostContext:()=>tv,getChildHostContext:()=>tv,commitUpdate(t,e,r,i,n){var s,a,o;th(e,i);let l=!1;if("primitive"===t.type&&r.object!==i.object||(null==(s=i.args)?void 0:s.length)!==(null==(a=r.args)?void 0:a.length)?l=!0:null!=(o=i.args)&&o.some((t,e)=>{var i;return t!==(null==(i=r.args)?void 0:i[e])})&&(l=!0),l)tm.push([t,{...i},n]);else{let e=function(t,e){let r={};for(let i in e)if(!q.includes(i)&&!k.equ(e[i],t.props[i]))for(let t in r[i]=e[i],e)t.startsWith(`${i}-`)&&(r[t]=e[t]);for(let i in t.props){if(q.includes(i)||e.hasOwnProperty(i))continue;let{root:n,key:s}=z(t.object,i);if(n.constructor&&0===n.constructor.length){let t=function(t){let e=U.get(t.constructor);try{e||(e=new t.constructor,U.set(t.constructor,e))}catch(t){}return e}(n);k.und(t)||(r[s]=t[s])}else r[s]=0}return r}(t,i);Object.keys(e).length&&(Object.assign(t.props,e),G(t.object,e))}(null===n.sibling||(4&n.flags)==0)&&function(){for(let[t]of tm){let e=t.parent;if(e)for(let r of(t.props.attach?N(e,t):X(t.object)&&X(e.object)&&e.object.remove(t.object),t.children))r.props.attach?N(t,r):X(r.object)&&X(t.object)&&t.object.remove(r.object);t.isHidden&&tu(t),t.object.__r3f&&delete t.object.__r3f,"primitive"!==t.type&&tp(t.object)}for(let[i,n,s]of tm){i.props=n;let a=i.parent;if(a){let n=tn[ta(i.type)];i.object=null!=(t=i.props.object)?t:new n(...null!=(e=i.props.args)?e:[]),i.object.__r3f=i;var t,e,r=i.object;for(let t of[s,s.alternate])if(null!==t)if("function"==typeof t.ref){null==t.refCleanup||t.refCleanup();let e=t.ref(r);"function"==typeof e&&(t.refCleanup=e)}else t.ref&&(t.ref.current=r);for(let t of(G(i.object,i.props),i.props.attach?D(a,i):X(i.object)&&X(a.object)&&a.object.add(i.object),i.children))t.props.attach?D(i,t):X(t.object)&&X(i.object)&&i.object.add(t.object);W(i)}}tm.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:t=>null==t?void 0:t.object,prepareForCommit:()=>null,preparePortalMount:t=>I(t.getState().scene,t,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(t){if(!t.isHidden){var e;t.props.attach&&null!=(e=t.parent)&&e.object?N(t.parent,t):X(t.object)&&(t.object.visible=!1),t.isHidden=!0,W(t)}},unhideInstance:tu,createTextInstance:tb,hideTextInstance:tb,unhideTextInstance:tb,scheduleTimeout:"function"==typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"==typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:l.createContext(null),setCurrentUpdatePriority(t){ty=t},getCurrentUpdatePriority:()=>ty,resolveUpdatePriority(){var t;if(0!==ty)return ty;switch("undefined"!=typeof window&&(null==(t=window.event)?void 0:t.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return u.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return u.ContinuousEventPriority;default:return u.DefaultEventPriority}},resetFormInstance(){}}),tw=new Map,tM={objects:"shallow",strict:!1};function t_(t){let e,r,i=tw.get(t),n=null==i?void 0:i.fiber,s=null==i?void 0:i.store;i&&console.warn("R3F.createRoot should only be called once!");let a="function"==typeof reportError?reportError:console.error,o=s||((t,e)=>{let r,i,n=(r=(r,i)=>{let n,s=new c.Vector3,a=new c.Vector3,o=new c.Vector3;function h(t=i().camera,e=a,r=i().size){let{width:n,height:l,top:u,left:c}=r,d=n/l;e.isVector3?o.copy(e):o.set(...e);let f=t.getWorldPosition(s).distanceTo(o);if(t&&t.isOrthographicCamera)return{width:n/t.zoom,height:l/t.zoom,top:u,left:c,factor:1,distance:f,aspect:d};{let e=2*Math.tan(t.fov*Math.PI/180/2)*f,r=n/l*e;return{width:r,height:e,top:u,left:c,factor:n/r,distance:f,aspect:d}}}let u=t=>r(e=>({performance:{...e.performance,current:t}})),d=new c.Vector2;return{set:r,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(e=1)=>t(i(),e),advance:(t,r)=>e(t,r,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new c.Clock,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let t=i();n&&clearTimeout(n),t.performance.current!==t.performance.min&&u(t.performance.min),n=setTimeout(()=>u(i().performance.max),t.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:t=>r(e=>({...e,events:{...e.events,...t}})),setSize:(t,e,n=0,s=0)=>{let o=i().camera,l={width:t,height:e,top:n,left:s};r(t=>({size:l,viewport:{...t.viewport,...h(o,a,l)}}))},setDpr:t=>r(e=>{let r=F(t);return{viewport:{...e.viewport,dpr:r,initialDpr:e.viewport.initialDpr||r}}}),setFrameloop:(t="always")=>{let e=i().clock;e.stop(),e.elapsedTime=0,"never"!==t&&(e.start(),e.elapsedTime=0),r(()=>({frameloop:t}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:l.createRef(),active:!1,frames:0,priority:0,subscribe:(t,e,r)=>{let n=i().internal;return n.priority=n.priority+ +(e>0),n.subscribers.push({ref:t,priority:e,store:r}),n.subscribers=n.subscribers.sort((t,e)=>t.priority-e.priority),()=>{let r=i().internal;null!=r&&r.subscribers&&(r.priority=r.priority-(e>0),r.subscribers=r.subscribers.filter(e=>e.ref!==t))}}}}})?g(r,i):g,s=n.getState(),a=s.size,o=s.viewport.dpr,h=s.camera;return n.subscribe(()=>{let{camera:t,size:e,viewport:r,gl:i,set:s}=n.getState();if(e.width!==a.width||e.height!==a.height||r.dpr!==o){a=e,o=r.dpr,function(t,e){!t.manual&&(t&&t.isOrthographicCamera?(t.left=-(e.width/2),t.right=e.width/2,t.top=e.height/2,t.bottom=-(e.height/2)):t.aspect=e.width/e.height,t.updateProjectionMatrix())}(t,e),r.dpr>0&&i.setPixelRatio(r.dpr);let n="undefined"!=typeof HTMLCanvasElement&&i.domElement instanceof HTMLCanvasElement;i.setSize(e.width,e.height,n)}t!==h&&(h=t,s(e=>({viewport:{...e.viewport,...e.viewport.getCurrentViewport(t)}})))}),n.subscribe(e=>t(e)),n})(tL,tI),h=n||tx.createContainer(o,u.ConcurrentRoot,null,!1,null,"",a,a,a,null);i||tw.set(t,{fiber:h,store:o});let d=!1,f=null;return{async configure(i={}){var n,s;let a;f=new Promise(t=>a=t);let{gl:l,size:h,scene:u,events:p,onCreated:g,shadows:m=!1,linear:b=!1,flat:v=!1,legacy:y=!1,orthographic:x=!1,frameloop:w="always",dpr:M=[1,2],performance:_,raycaster:E,camera:C,onPointerMissed:S}=i,A=o.getState(),j=A.gl;if(!A.gl){let e={canvas:t,powerPreference:"high-performance",antialias:!0,alpha:!0},r="function"==typeof l?await l(e):l;j=Z(r)?r:new c.WebGLRenderer({...e,...l}),A.set({gl:j})}let O=A.raycaster;O||A.set({raycaster:O=new c.Raycaster});let{params:P,...T}=E||{};if(k.equ(T,O,tM)||G(O,{...T}),k.equ(P,O.params,tM)||G(O,{params:{...O.params,...P}}),!A.camera||A.camera===r&&!k.equ(r,C,tM)){r=C;let t=null==C?void 0:C.isCamera,e=t?C:x?new c.OrthographicCamera(0,0,0,0,.1,1e3):new c.PerspectiveCamera(75,0,.1,1e3);!t&&(e.position.z=5,C&&(G(e,C),!e.manual&&("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(e.manual=!0,e.updateProjectionMatrix())),A.camera||null!=C&&C.rotation||e.lookAt(0,0,0)),A.set({camera:e}),O.camera=e}if(!A.scene){let t;null!=u&&u.isScene?I(t=u,o,"",{}):(I(t=new c.Scene,o,"",{}),u&&G(t,u)),A.set({scene:t})}p&&!A.events.handlers&&A.set({events:p(o)});let R=function(t,e){if(!e&&"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&t.parentElement){let{width:e,height:r,top:i,left:n}=t.parentElement.getBoundingClientRect();return{width:e,height:r,top:i,left:n}}return!e&&"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?{width:t.width,height:t.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...e}}(t,h);if(k.equ(R,A.size,tM)||A.setSize(R.width,R.height,R.top,R.left),M&&A.viewport.dpr!==F(M)&&A.setDpr(M),A.frameloop!==w&&A.setFrameloop(w),A.onPointerMissed||A.set({onPointerMissed:S}),_&&!k.equ(_,A.performance,tM)&&A.set(t=>({performance:{...t.performance,..._}})),!A.xr){let t=(t,e)=>{let r=o.getState();"never"!==r.frameloop&&tI(t,!0,r,e)},e=()=>{let e=o.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?t:null),e.gl.xr.isPresenting||tL(e)},r={connect(){let t=o.getState().gl;t.xr.addEventListener("sessionstart",e),t.xr.addEventListener("sessionend",e)},disconnect(){let t=o.getState().gl;t.xr.removeEventListener("sessionstart",e),t.xr.removeEventListener("sessionend",e)}};"function"==typeof(null==(n=j.xr)?void 0:n.addEventListener)&&r.connect(),A.set({xr:r})}if(j.shadowMap){let t=j.shadowMap.enabled,e=j.shadowMap.type;if(j.shadowMap.enabled=!!m,k.boo(m))j.shadowMap.type=c.PCFSoftShadowMap;else if(k.str(m)){let t={basic:c.BasicShadowMap,percentage:c.PCFShadowMap,soft:c.PCFSoftShadowMap,variance:c.VSMShadowMap};j.shadowMap.type=null!=(s=t[m])?s:c.PCFSoftShadowMap}else k.obj(m)&&Object.assign(j.shadowMap,m);(t!==j.shadowMap.enabled||e!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}return c.ColorManagement.enabled=!y,d||(j.outputColorSpace=b?c.LinearSRGBColorSpace:c.SRGBColorSpace,j.toneMapping=v?c.NoToneMapping:c.ACESFilmicToneMapping),A.legacy!==y&&A.set(()=>({legacy:y})),A.linear!==b&&A.set(()=>({linear:b})),A.flat!==v&&A.set(()=>({flat:v})),!l||k.fun(l)||Z(l)||k.equ(l,j,tM)||G(j,l),e=g,d=!0,a(),this},render(r){return d||f||this.configure(),f.then(()=>{tx.updateContainer((0,M.jsx)(tE,{store:o,children:r,onCreated:e,rootElement:t}),h,null,()=>void 0)}),o},unmount(){tC(t)}}}function tE({store:t,children:e,onCreated:r,rootElement:i}){return A(()=>{let e=t.getState();e.set(t=>({internal:{...t.internal,active:!0}})),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(i)},[]),(0,M.jsx)(Q.Provider,{value:t,children:e})}function tC(t,e){let r=tw.get(t),i=null==r?void 0:r.fiber;if(i){let n=null==r?void 0:r.store.getState();n&&(n.internal.active=!1),tx.updateContainer(null,i,null,()=>{n&&setTimeout(()=>{try{null==n.events.disconnect||n.events.disconnect(),null==(r=n.gl)||null==(i=r.renderLists)||null==i.dispose||i.dispose(),null==(s=n.gl)||null==s.forceContextLoss||s.forceContextLoss(),null!=(a=n.gl)&&a.xr&&n.xr.disconnect();var r,i,s,a,o=n.scene;for(let t in"Scene"!==o.type&&(null==o.dispose||o.dispose()),o){let e=o[t];(null==e?void 0:e.type)!=="Scene"&&(null==e||null==e.dispose||e.dispose())}tw.delete(t),e&&e(t)}catch(t){}},500)})}}let tS=new Set,tA=new Set,tj=new Set;function tO(t,e){if(t.size)for(let{callback:r}of t.values())r(e)}function tP(t,e){switch(t){case"before":return tO(tS,e);case"after":return tO(tA,e);case"tail":return tO(tj,e)}}function tT(t,e,r){let s=e.clock.getDelta();"never"===e.frameloop&&"number"==typeof t&&(s=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),i=e.internal.subscribers;for(let t=0;t<i.length;t++)(n=i[t]).ref.current(n.store.getState(),s,r);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),"always"===e.frameloop?1:e.internal.frames}let tF=!1,tR=!1;function tk(t){for(let r of(a=requestAnimationFrame(tk),tF=!0,s=0,tP("before",t),tR=!0,tw.values())){var e;(o=r.store.getState()).internal.active&&("always"===o.frameloop||o.internal.frames>0)&&!(null!=(e=o.gl.xr)&&e.isPresenting)&&(s+=tT(t,o))}if(tR=!1,tP("after",t),0===s)return tP("tail",t),tF=!1,cancelAnimationFrame(a)}function tL(t,e=1){var r;if(!t)return tw.forEach(t=>tL(t.store.getState(),e));(null==(r=t.gl.xr)||!r.isPresenting)&&t.internal.active&&"never"!==t.frameloop&&(e>1?t.internal.frames=Math.min(60,t.internal.frames+e):tR?t.internal.frames=2:t.internal.frames=1,tF||(tF=!0,requestAnimationFrame(tk)))}function tI(t,e=!0,r,i){if(e&&tP("before",t),r)tT(t,r,i);else for(let e of tw.values())tT(t,e.store.getState());e&&tP("after",t)}let tz={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function tB(t){let{handlePointer:e}=function(t){function e(t){return t.filter(t=>["Move","Over","Enter","Out","Leave"].some(e=>{var r;return null==(r=t.__r3f)?void 0:r.handlers["onPointer"+e]}))}function r(e){let{internal:r}=t.getState();for(let t of r.hovered.values())if(!e.length||!e.find(e=>e.object===t.object&&e.index===t.index&&e.instanceId===t.instanceId)){let i=t.eventObject.__r3f;if(r.hovered.delete(Y(t)),null!=i&&i.eventCount){let r=i.handlers,n={...t,intersections:e};null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}function i(t,e){for(let r=0;r<e.length;r++){let i=e[r].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(t)}}return{handlePointer:function(n){switch(n){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return e=>{let{internal:i}=t.getState();"pointerId"in e&&i.capturedMap.has(e.pointerId)&&requestAnimationFrame(()=>{i.capturedMap.has(e.pointerId)&&(i.capturedMap.delete(e.pointerId),r([]))})}}return function(s){let{onPointerMissed:a,internal:o}=t.getState();o.lastEvent.current=s;let l="onPointerMove"===n,h="onClick"===n||"onContextMenu"===n||"onDoubleClick"===n,u=function(e,r){let i=t.getState(),n=new Set,s=[],a=r?r(i.internal.interaction):i.internal.interaction;for(let t=0;t<a.length;t++){let e=R(a[t]);e&&(e.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(e,i);let o=a.flatMap(function(t){let r=R(t);if(!r||!r.events.enabled||null===r.raycaster.camera)return[];if(void 0===r.raycaster.camera){var i;null==r.events.compute||r.events.compute(e,r,null==(i=r.previousRoot)?void 0:i.getState()),void 0===r.raycaster.camera&&(r.raycaster.camera=null)}return r.raycaster.camera?r.raycaster.intersectObject(t,!0):[]}).sort((t,e)=>{let r=R(t.object),i=R(e.object);return r&&i&&i.events.priority-r.events.priority||t.distance-e.distance}).filter(t=>{let e=Y(t);return!n.has(e)&&(n.add(e),!0)});for(let t of(i.events.filter&&(o=i.events.filter(o,i)),o)){let e=t.object;for(;e;){var l;null!=(l=e.__r3f)&&l.eventCount&&s.push({...t,eventObject:e}),e=e.parent}}if("pointerId"in e&&i.internal.capturedMap.has(e.pointerId))for(let t of i.internal.capturedMap.get(e.pointerId).values())n.has(Y(t.intersection))||s.push(t.intersection);return s}(s,l?e:void 0),d=h?function(e){let{internal:r}=t.getState(),i=e.offsetX-r.initialClick[0],n=e.offsetY-r.initialClick[1];return Math.round(Math.sqrt(i*i+n*n))}(s):0;"onPointerDown"===n&&(o.initialClick=[s.offsetX,s.offsetY],o.initialHits=u.map(t=>t.eventObject)),h&&!u.length&&d<=2&&(i(s,o.interaction),a&&a(s)),l&&r(u),!function(t,e,i,n){if(t.length){let s={stopped:!1};for(let a of t){let o=R(a.object);if(o||a.object.traverseAncestors(t=>{let e=R(t);if(e)return o=e,!1}),o){let{raycaster:l,pointer:h,camera:u,internal:d}=o,f=new c.Vector3(h.x,h.y,0).unproject(u),p=t=>{var e,r;return null!=(e=null==(r=d.capturedMap.get(t))?void 0:r.has(a.eventObject))&&e},g=t=>{let r={intersection:a,target:e.target};d.capturedMap.has(t)?d.capturedMap.get(t).set(a.eventObject,r):d.capturedMap.set(t,new Map([[a.eventObject,r]])),e.target.setPointerCapture(t)},m=t=>{let e=d.capturedMap.get(t);e&&$(d.capturedMap,a.eventObject,e,t)},b={};for(let t in e){let r=e[t];"function"!=typeof r&&(b[t]=r)}let v={...a,...b,pointer:h,intersections:t,stopped:s.stopped,delta:i,unprojectedPoint:f,ray:l.ray,camera:u,stopPropagation(){let i="pointerId"in e&&d.capturedMap.get(e.pointerId);(!i||i.has(a.eventObject))&&(v.stopped=s.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(t=>t.eventObject===a.eventObject)&&r([...t.slice(0,t.indexOf(a)),a]))},target:{hasPointerCapture:p,setPointerCapture:g,releasePointerCapture:m},currentTarget:{hasPointerCapture:p,setPointerCapture:g,releasePointerCapture:m},nativeEvent:e};if(n(v),!0===s.stopped)break}}}}(u,s,d,function(t){let e=t.eventObject,r=e.__r3f;if(!(null!=r&&r.eventCount))return;let a=r.handlers;if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){let e=Y(t),r=o.hovered.get(e);r?r.stopped&&t.stopPropagation():(o.hovered.set(e,t),null==a.onPointerOver||a.onPointerOver(t),null==a.onPointerEnter||a.onPointerEnter(t))}null==a.onPointerMove||a.onPointerMove(t)}else{let r=a[n];r?(!h||o.initialHits.includes(e))&&(i(s,o.interaction.filter(t=>!o.initialHits.includes(t))),r(t)):h&&o.initialHits.includes(e)&&i(s,o.interaction.filter(t=>!o.initialHits.includes(t)))}})}}}}(t);return{priority:1,enabled:!0,compute(t,e,r){e.pointer.set(t.offsetX/e.size.width*2-1,-(2*(t.offsetY/e.size.height))+1),e.raycaster.setFromCamera(e.pointer,e.camera)},connected:void 0,handlers:Object.keys(tz).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var e;let{events:r,internal:i}=t.getState();null!=(e=i.lastEvent)&&e.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:e=>{let{set:r,events:i}=t.getState();if(null==i.disconnect||i.disconnect(),r(t=>({events:{...t.events,connected:e}})),i.handlers)for(let t in i.handlers){let r=i.handlers[t],[n,s]=tz[t];e.addEventListener(n,r,{passive:s})}},disconnect:()=>{let{set:e,events:r}=t.getState();if(r.connected){if(r.handlers)for(let t in r.handlers){let e=r.handlers[t],[i]=tz[t];r.connected.removeEventListener(i,e)}e(t=>({events:{...t.events,connected:void 0}}))}}}}},4943:(t,e,r)=>{t.exports=r(4004)},5682:(t,e,r)=>{r.d(e,{B:()=>s});let i=1,n={};class s{constructor(t,{vertex:e,fragment:r,uniforms:n={},transparent:s=!1,cullFace:a=t.BACK,frontFace:o=t.CCW,depthTest:l=!0,depthWrite:h=!0,depthFunc:u=t.LEQUAL}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=n,this.id=i++,e||console.warn("vertex shader not supplied"),r||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=a,this.frontFace=o,this.depthTest=l,this.depthWrite=h,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=t.createShader(t.VERTEX_SHADER),this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:e,fragment:r})}setShaders({vertex:t,fragment:e}){if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),""!==this.gl.getShaderInfoLog(this.vertexShader)&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${o(t)}`)),e&&(this.gl.shaderSource(this.fragmentShader,e),this.gl.compileShader(this.fragmentShader),""!==this.gl.getShaderInfoLog(this.fragmentShader)&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${o(e)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let t=0;t<r;t++){let e=this.gl.getActiveUniform(this.program,t);this.uniformLocations.set(e,this.gl.getUniformLocation(this.program,e.name));let r=e.name.match(/(\w+)/g);e.uniformName=r[0],e.nameComponents=r.slice(1)}this.attributeLocations=new Map;let i=[],n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let t=0;t<n;t++){let e=this.gl.getActiveAttrib(this.program,t),r=this.gl.getAttribLocation(this.program,e.name);-1!==r&&(i[r]=e.name,this.attributeLocations.set(e,r))}this.attributeOrder=i.join("")}setBlendFunc(t,e,r,i){this.blendFunc.src=t,this.blendFunc.dst=e,this.blendFunc.srcAlpha=r,this.blendFunc.dstAlpha=i,t&&(this.transparent=!0)}setBlendEquation(t,e){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=e}setStencilFunc(t,e,r){this.stencilRef=e,this.stencilFunc.func=t,this.stencilFunc.ref=e,this.stencilFunc.mask=r}setStencilOp(t,e,r){this.stencilOp.stencilFail=t,this.stencilOp.depthFail=e,this.stencilOp.depthPass=r}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:t=!1}={}){let e=-1;this.gl.renderer.state.currentProgram!==this.id&&(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((t,r)=>{let i=this.uniforms[r.uniformName];for(let t of r.nameComponents){if(!i)break;if(t in i)i=i[t];else if(Array.isArray(i.value))break;else{i=void 0;break}}if(!i)return h(`Active uniform ${r.name} has not been supplied`);if(i&&void 0===i.value)return h(`${r.name} uniform is missing a value parameter`);if(i.value.texture)return e+=1,i.value.update(e),a(this.gl,r.type,t,e);if(i.value.length&&i.value[0].texture){let n=[];return i.value.forEach(t=>{e+=1,t.update(e),n.push(e)}),a(this.gl,r.type,t,n)}a(this.gl,r.type,t,i.value)}),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function a(t,e,r,i){i=i.length?function(t){let e=t.length,r=t[0].length;if(void 0===r)return t;let i=e*r,s=n[i];s||(n[i]=s=new Float32Array(i));for(let i=0;i<e;i++)s.set(t[i],i*r);return s}(i):i;let s=t.renderer.state.uniformLocations.get(r);if(i.length)if(void 0===s||s.length!==i.length)t.renderer.state.uniformLocations.set(r,i.slice(0));else{if(function(t,e){if(t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0}(s,i))return;s.set?s.set(i):function(t,e){for(let r=0,i=t.length;r<i;r++)t[r]=e[r]}(s,i),t.renderer.state.uniformLocations.set(r,s)}else{if(s===i)return;t.renderer.state.uniformLocations.set(r,i)}switch(e){case 5126:return i.length?t.uniform1fv(r,i):t.uniform1f(r,i);case 35664:return t.uniform2fv(r,i);case 35665:return t.uniform3fv(r,i);case 35666:return t.uniform4fv(r,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?t.uniform1iv(r,i):t.uniform1i(r,i);case 35671:case 35667:return t.uniform2iv(r,i);case 35672:case 35668:return t.uniform3iv(r,i);case 35673:case 35669:return t.uniform4iv(r,i);case 35674:return t.uniformMatrix2fv(r,!1,i);case 35675:return t.uniformMatrix3fv(r,!1,i);case 35676:return t.uniformMatrix4fv(r,!1,i)}}function o(t){let e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}let l=0;function h(t){!(l>100)&&(console.warn(t),++l>100&&console.warn("More than 100 program warnings - stopping logs."))}},6278:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});let i=r(8140)._(r(1150));function n(t,e){var r;let n={};"function"==typeof t&&(n.loader=t);let s={...n,...e};return(0,i.default)({...s,modules:null==(r=s.loadableGenerated)?void 0:r.modules})}("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},6362:(t,e,r)=>{t.exports=r(979)},6552:(t,e,r)=>{function i(t){let{moduleIds:e}=t;return null}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"PreloadChunks",{enumerable:!0,get:function(){return i}}),r(5155),r(7650),r(8567),r(7278)},6854:(t,e,r)=>{r.d(e,{Q:()=>a});let i={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function n(t){4===t.length&&(t=t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e||console.warn(`Unable to convert hex string ${t} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}function s(t){if(void 0===t)return[0,0,0];if(3==arguments.length)return arguments;if(!isNaN(t)){var e;return[((e=parseInt(e=t))>>16&255)/255,(e>>8&255)/255,(255&e)/255]}return"#"===t[0]?n(t):i[t.toLowerCase()]?n(i[t.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0])}class a extends Array{constructor(t){if(Array.isArray(t))return super(...t);return super(...s(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(t){this[0]=t}set g(t){this[1]=t}set b(t){this[2]=t}set(t){return Array.isArray(t)?this.copy(t):this.copy(s(...arguments))}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this}}},7828:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"workAsyncStorageInstance",{enumerable:!0,get:function(){return i}});let i=(0,r(4054).createAsyncLocalStorage)()},7909:(t,e,r)=>{r.d(e,{default:()=>n.a});var i=r(6278),n=r.n(i)},8567:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"workAsyncStorage",{enumerable:!0,get:function(){return i.workAsyncStorageInstance}});let i=r(7828)},8807:(t,e,r)=>{t.exports=r(7719)},8828:(t,e,r)=>{t.exports=r(3654)},8870:(t,e,r)=>{t.exports=r(1975)},9026:(t,e,r)=>{r.d(e,{e:()=>w});var i=r(3170);function n(t,e,r){let i=e[0],n=e[1],s=e[2],a=e[3],o=r[0],l=r[1],h=r[2],u=r[3];return t[0]=i*u+a*o+n*h-s*l,t[1]=n*u+a*l+s*o-i*h,t[2]=s*u+a*h+i*l-n*o,t[3]=a*u-i*o-n*l-s*h,t}let s=function(t,e){let r=e[0],i=e[1],n=e[2],s=e[3],a=r*r+i*i+n*n+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=i*a,t[2]=n*a,t[3]=s*a,t};class a extends Array{constructor(t=0,e=0,r=0,i=1){super(t,e,r,i),this.onChange=()=>{},this._target=this;let n=["0","1","2","3"];return new Proxy(this,{set(t,e){let r=Reflect.set(...arguments);return r&&n.includes(e)&&t.onChange(),r}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set w(t){this._target[3]=t,this.onChange()}identity(){var t;return(t=this._target)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.onChange(),this}set(t,e,r,i){var n;return t.length?this.copy(t):(n=this._target,n[0]=t,n[1]=e,n[2]=r,n[3]=i,this.onChange(),this)}rotateX(t){var e,r,i;let n,s,a,o,l,h;return e=this._target,r=this._target,i=.5*t,n=r[0],s=r[1],a=r[2],o=r[3],l=Math.sin(i),h=Math.cos(i),e[0]=n*h+o*l,e[1]=s*h+a*l,e[2]=a*h-s*l,e[3]=o*h-n*l,this.onChange(),this}rotateY(t){var e,r,i;let n,s,a,o,l,h;return e=this._target,r=this._target,i=.5*t,n=r[0],s=r[1],a=r[2],o=r[3],l=Math.sin(i),h=Math.cos(i),e[0]=n*h-a*l,e[1]=s*h+o*l,e[2]=a*h+n*l,e[3]=o*h-s*l,this.onChange(),this}rotateZ(t){var e,r,i;let n,s,a,o,l,h;return e=this._target,r=this._target,i=.5*t,n=r[0],s=r[1],a=r[2],o=r[3],l=Math.sin(i),h=Math.cos(i),e[0]=n*h+s*l,e[1]=s*h-n*l,e[2]=a*h+o*l,e[3]=o*h-a*l,this.onChange(),this}inverse(t=this._target){var e;let r,i,n,s,a,o;return e=this._target,r=t[0],i=t[1],o=(a=r*r+i*i+(n=t[2])*n+(s=t[3])*s)?1/a:0,e[0]=-r*o,e[1]=-i*o,e[2]=-n*o,e[3]=s*o,this.onChange(),this}conjugate(t=this._target){var e;return e=this._target,e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],this.onChange(),this}copy(t){var e;return e=this._target,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this.onChange(),this}normalize(t=this._target){return s(this._target,t),this.onChange(),this}multiply(t,e){return e?n(this._target,t,e):n(this._target,this._target,t),this.onChange(),this}dot(t){var e;return e=this._target,e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}fromMatrix3(t){return!function(t,e){let r,i=e[0]+e[4]+e[8];if(i>0)r=Math.sqrt(i+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);let n=(i+1)%3,s=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*n+n]-e[3*s+s]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*n+s]-e[3*s+n])*r,t[n]=(e[3*n+i]+e[3*i+n])*r,t[s]=(e[3*s+i]+e[3*i+s])*r}}(this._target,t),this.onChange(),this}fromEuler(t,e){return!function(t,e,r="YXZ"){let i=Math.sin(.5*e[0]),n=Math.cos(.5*e[0]),s=Math.sin(.5*e[1]),a=Math.cos(.5*e[1]),o=Math.sin(.5*e[2]),l=Math.cos(.5*e[2]);"XYZ"===r?(t[0]=i*a*l+n*s*o,t[1]=n*s*l-i*a*o,t[2]=n*a*o+i*s*l,t[3]=n*a*l-i*s*o):"YXZ"===r?(t[0]=i*a*l+n*s*o,t[1]=n*s*l-i*a*o,t[2]=n*a*o-i*s*l,t[3]=n*a*l+i*s*o):"ZXY"===r?(t[0]=i*a*l-n*s*o,t[1]=n*s*l+i*a*o,t[2]=n*a*o+i*s*l,t[3]=n*a*l-i*s*o):"ZYX"===r?(t[0]=i*a*l-n*s*o,t[1]=n*s*l+i*a*o,t[2]=n*a*o-i*s*l,t[3]=n*a*l+i*s*o):"YZX"===r?(t[0]=i*a*l+n*s*o,t[1]=n*s*l+i*a*o,t[2]=n*a*o-i*s*l,t[3]=n*a*l-i*s*o):"XZY"===r&&(t[0]=i*a*l-n*s*o,t[1]=n*s*l-i*a*o,t[2]=n*a*o+i*s*l,t[3]=n*a*l+i*s*o)}(this._target,t,t.order),e||this.onChange(),this}fromAxisAngle(t,e){var r,i;let n;return r=this._target,n=Math.sin(i=.5*e),r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=Math.cos(i),this.onChange(),this}slerp(t,e){var r,i;let n,s,a,o,l,h,u,c,d,f,p,g,m;return r=this._target,i=this._target,h=i[0],u=i[1],c=i[2],d=i[3],f=t[0],p=t[1],(s=h*f+u*p+c*(g=t[2])+d*(m=t[3]))<0&&(s=-s,f=-f,p=-p,g=-g,m=-m),1-s>1e-6?(a=Math.sin(n=Math.acos(s)),o=Math.sin((1-e)*n)/a,l=Math.sin(e*n)/a):(o=1-e,l=e),r[0]=o*h+l*f,r[1]=o*u+l*p,r[2]=o*c+l*g,r[3]=o*d+l*m,this.onChange(),this}fromArray(t,e=0){return this._target[0]=t[e],this._target[1]=t[e+1],this._target[2]=t[e+2],this._target[3]=t[e+3],this.onChange(),this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}}var o=r(9170);function l(t){let e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15];return(e*a-r*s)*(c*m-d*g)-(e*o-i*s)*(u*m-d*p)+(e*l-n*s)*(u*g-c*p)+(r*o-i*a)*(h*m-d*f)-(r*l-n*a)*(h*g-c*f)+(i*l-n*o)*(h*p-u*f)}function h(t,e,r){let i=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],d=e[9],f=e[10],p=e[11],g=e[12],m=e[13],b=e[14],v=e[15],y=r[0],x=r[1],w=r[2],M=r[3];return t[0]=y*i+x*o+w*c+M*g,t[1]=y*n+x*l+w*d+M*m,t[2]=y*s+x*h+w*f+M*b,t[3]=y*a+x*u+w*p+M*v,y=r[4],x=r[5],w=r[6],M=r[7],t[4]=y*i+x*o+w*c+M*g,t[5]=y*n+x*l+w*d+M*m,t[6]=y*s+x*h+w*f+M*b,t[7]=y*a+x*u+w*p+M*v,y=r[8],x=r[9],w=r[10],M=r[11],t[8]=y*i+x*o+w*c+M*g,t[9]=y*n+x*l+w*d+M*m,t[10]=y*s+x*h+w*f+M*b,t[11]=y*a+x*u+w*p+M*v,y=r[12],x=r[13],w=r[14],M=r[15],t[12]=y*i+x*o+w*c+M*g,t[13]=y*n+x*l+w*d+M*m,t[14]=y*s+x*h+w*f+M*b,t[15]=y*a+x*u+w*p+M*v,t}function u(t,e){let r=e[0],i=e[1],n=e[2],s=e[4],a=e[5],o=e[6],l=e[8],h=e[9],u=e[10];return t[0]=Math.hypot(r,i,n),t[1]=Math.hypot(s,a,o),t[2]=Math.hypot(l,h,u),t}let c=function(){let t=[1,1,1];return function(e,r){u(t,r);let i=1/t[0],n=1/t[1],s=1/t[2],a=r[0]*i,o=r[1]*n,l=r[2]*s,h=r[4]*i,c=r[5]*n,d=r[6]*s,f=r[8]*i,p=r[9]*n,g=r[10]*s,m=a+c+g,b=0;return m>0?(b=2*Math.sqrt(m+1),e[3]=.25*b,e[0]=(d-p)/b,e[1]=(f-l)/b,e[2]=(o-h)/b):a>c&&a>g?(b=2*Math.sqrt(1+a-c-g),e[3]=(d-p)/b,e[0]=.25*b,e[1]=(o+h)/b,e[2]=(f+l)/b):c>g?(b=2*Math.sqrt(1+c-a-g),e[3]=(f-l)/b,e[0]=(o+h)/b,e[1]=.25*b,e[2]=(d+p)/b):(b=2*Math.sqrt(1+g-a-c),e[3]=(o-h)/b,e[0]=(f+l)/b,e[1]=(d+p)/b,e[2]=.25*b),e}}();function d(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function f(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}class p extends Array{constructor(t=1,e=0,r=0,i=0,n=0,s=1,a=0,o=0,l=0,h=0,u=1,c=0,d=0,f=0,p=0,g=1){return super(t,e,r,i,n,s,a,o,l,h,u,c,d,f,p,g),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,e,r,i,n,s,a,o,l,h,u,c,d,f,p,g){return t.length?this.copy(t):(this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=n,this[5]=s,this[6]=a,this[7]=o,this[8]=l,this[9]=h,this[10]=u,this[11]=c,this[12]=d,this[13]=f,this[14]=p,this[15]=g,this)}translate(t,e=this){let r,i,n,s,a,o,l,h,u,c,d,f,p,g,m;return p=t[0],g=t[1],m=t[2],e===this?(this[12]=e[0]*p+e[4]*g+e[8]*m+e[12],this[13]=e[1]*p+e[5]*g+e[9]*m+e[13],this[14]=e[2]*p+e[6]*g+e[10]*m+e[14],this[15]=e[3]*p+e[7]*g+e[11]*m+e[15]):(r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],u=e[8],c=e[9],d=e[10],f=e[11],this[0]=r,this[1]=i,this[2]=n,this[3]=s,this[4]=a,this[5]=o,this[6]=l,this[7]=h,this[8]=u,this[9]=c,this[10]=d,this[11]=f,this[12]=r*p+a*g+u*m+e[12],this[13]=i*p+o*g+c*m+e[13],this[14]=n*p+l*g+d*m+e[14],this[15]=s*p+h*g+f*m+e[15]),this}rotate(t,e,r=this){let i,n,s,a,o,l,h,u,c,d,f,p,g,m,b,v,y,x,w,M,_,E,C,S,A,j,O,P;return A=e[0],1e-6>Math.abs(P=Math.hypot(A,j=e[1],O=e[2]))||(A*=P=1/P,j*=P,O*=P,i=Math.sin(t),s=1-(n=Math.cos(t)),a=r[0],o=r[1],l=r[2],h=r[3],u=r[4],c=r[5],d=r[6],f=r[7],p=r[8],g=r[9],m=r[10],b=r[11],v=A*A*s+n,y=j*A*s+O*i,x=O*A*s-j*i,w=A*j*s-O*i,M=j*j*s+n,_=O*j*s+A*i,E=A*O*s+j*i,C=j*O*s-A*i,S=O*O*s+n,this[0]=a*v+u*y+p*x,this[1]=o*v+c*y+g*x,this[2]=l*v+d*y+m*x,this[3]=h*v+f*y+b*x,this[4]=a*w+u*M+p*_,this[5]=o*w+c*M+g*_,this[6]=l*w+d*M+m*_,this[7]=h*w+f*M+b*_,this[8]=a*E+u*C+p*S,this[9]=o*E+c*C+g*S,this[10]=l*E+d*C+m*S,this[11]=h*E+f*C+b*S,r!==this&&(this[12]=r[12],this[13]=r[13],this[14]=r[14],this[15]=r[15])),this}scale(t,e=this){var r;let i,n,s;return i=(r="number"==typeof t?[t,t,t]:t)[0],n=r[1],s=r[2],this[0]=e[0]*i,this[1]=e[1]*i,this[2]=e[2]*i,this[3]=e[3]*i,this[4]=e[4]*n,this[5]=e[5]*n,this[6]=e[6]*n,this[7]=e[7]*n,this[8]=e[8]*s,this[9]=e[9]*s,this[10]=e[10]*s,this[11]=e[11]*s,this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this}add(t,e){return e?d(this,t,e):d(this,this,t),this}sub(t,e){return e?f(this,t,e):f(this,this,t),this}multiply(t,e){if(t.length)e?h(this,t,e):h(this,this,t);else this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,this[4]=this[4]*t,this[5]=this[5]*t,this[6]=this[6]*t,this[7]=this[7]*t,this[8]=this[8]*t,this[9]=this[9]*t,this[10]=this[10]*t,this[11]=this[11]*t,this[12]=this[12]*t,this[13]=this[13]*t,this[14]=this[14]*t,this[15]=this[15]*t;return this}identity(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this}fromPerspective({fov:t,aspect:e,near:r,far:i}={}){let n,s;return n=1/Math.tan(t/2),s=1/(r-i),this[0]=n/e,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=n,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=(i+r)*s,this[11]=-1,this[12]=0,this[13]=0,this[14]=2*i*r*s,this[15]=0,this}fromOrthogonal({left:t,right:e,bottom:r,top:i,near:n,far:s}){let a,o,l;return a=1/(t-e),o=1/(r-i),l=1/(n-s),this[0]=-2*a,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=-2*o,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=2*l,this[11]=0,this[12]=(t+e)*a,this[13]=(i+r)*o,this[14]=(s+n)*l,this[15]=1,this}fromQuaternion(t){let e,r,i,n,s,a,o,l,h,u,c,d,f,p,g,m;return e=t[0],r=t[1],i=t[2],n=t[3],s=e+e,a=r+r,o=i+i,l=e*s,h=r*s,u=r*a,c=i*s,d=i*a,f=i*o,p=n*s,g=n*a,m=n*o,this[0]=1-u-f,this[1]=h+m,this[2]=c-g,this[3]=0,this[4]=h-m,this[5]=1-l-f,this[6]=d+p,this[7]=0,this[8]=c+g,this[9]=d-p,this[10]=1-l-u,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){let e,r,i,n,s,a,o,l,h,u,c,d,f,p,g,m,b,v,y,x,w,M,_,E,C,S,A,j,O;return e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15],b=e*a-r*s,v=e*o-i*s,y=e*l-n*s,x=r*o-i*a,w=r*l-n*a,M=i*l-n*o,_=h*p-u*f,E=h*g-c*f,C=h*m-d*f,S=u*g-c*p,A=u*m-d*p,(O=b*(j=c*m-d*g)-v*A+y*S+x*C-w*E+M*_)&&(O=1/O,this[0]=(a*j-o*A+l*S)*O,this[1]=(i*A-r*j-n*S)*O,this[2]=(p*M-g*w+m*x)*O,this[3]=(c*w-u*M-d*x)*O,this[4]=(o*C-s*j-l*E)*O,this[5]=(e*j-i*C+n*E)*O,this[6]=(g*y-f*M-m*v)*O,this[7]=(h*M-c*y+d*v)*O,this[8]=(s*A-a*C+l*_)*O,this[9]=(r*C-e*A-n*_)*O,this[10]=(f*w-p*y+m*b)*O,this[11]=(u*y-h*w-d*b)*O,this[12]=(a*E-s*S-o*_)*O,this[13]=(e*S-r*E+i*_)*O,this[14]=(p*v-f*x-g*b)*O,this[15]=(h*x-u*v+c*b)*O),this}compose(t,e,r){return!function(t,e,r,i){let n=e[0],s=e[1],a=e[2],o=e[3],l=n+n,h=s+s,u=a+a,c=n*l,d=n*h,f=n*u,p=s*h,g=s*u,m=a*u,b=o*l,v=o*h,y=o*u,x=i[0],w=i[1],M=i[2];t[0]=(1-(p+m))*x,t[1]=(d+y)*x,t[2]=(f-v)*x,t[3]=0,t[4]=(d-y)*w,t[5]=(1-(c+m))*w,t[6]=(g+b)*w,t[7]=0,t[8]=(f+v)*M,t[9]=(g-b)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1}(this,t,e,r),this}decompose(t,e,r){return!function(t,e,r,i){let n=o.Bw([t[0],t[1],t[2]]),s=o.Bw([t[4],t[5],t[6]]),a=o.Bw([t[8],t[9],t[10]]);0>l(t)&&(n=-n),r[0]=t[12],r[1]=t[13],r[2]=t[14];let h=t.slice(),u=1/n,d=1/s,f=1/a;h[0]*=u,h[1]*=u,h[2]*=u,h[4]*=d,h[5]*=d,h[6]*=d,h[8]*=f,h[9]*=f,h[10]*=f,c(e,h),i[0]=n,i[1]=s,i[2]=a}(this,t,e,r),this}getRotation(t){return c(t,this),this}getTranslation(t){return t[0]=this[12],t[1]=this[13],t[2]=this[14],this}getScaling(t){return u(t,this),this}getMaxScaleOnAxis(){let t,e,r,i,n,s,a,o,l;return t=this[0],e=this[1],r=this[2],i=this[4],n=this[5],s=this[6],a=this[8],Math.sqrt(Math.max(t*t+e*e+r*r,i*i+n*n+s*s,a*a+(o=this[9])*o+(l=this[10])*l))}lookAt(t,e,r){let i,n,s,a,o,l,h,u,c,d,f,p,g;return i=t[0],n=t[1],s=t[2],a=r[0],o=r[1],l=r[2],h=i-e[0],0==(d=h*h+(u=n-e[1])*u+(c=s-e[2])*c)?c=1:(h*=d=1/Math.sqrt(d),u*=d,c*=d),0==(d=(f=o*c-l*u)*f+(p=l*h-a*c)*p+(g=a*u-o*h)*g)&&(l?a+=1e-6:o?l+=1e-6:o+=1e-6,d=(f=o*c-l*u)*f+(p=l*h-a*c)*p+(g=a*u-o*h)*g),f*=d=1/Math.sqrt(d),p*=d,g*=d,this[0]=f,this[1]=p,this[2]=g,this[3]=0,this[4]=u*g-c*p,this[5]=c*f-h*g,this[6]=h*p-u*f,this[7]=0,this[8]=h,this[9]=u,this[10]=c,this[11]=0,this[12]=i,this[13]=n,this[14]=s,this[15]=1,this}determinant(){return l(this)}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this[4]=t[e+4],this[5]=t[e+5],this[6]=t[e+6],this[7]=t[e+7],this[8]=t[e+8],this[9]=t[e+9],this[10]=t[e+10],this[11]=t[e+11],this[12]=t[e+12],this[13]=t[e+13],this[14]=t[e+14],this[15]=t[e+15],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t[e+4]=this[4],t[e+5]=this[5],t[e+6]=this[6],t[e+7]=this[7],t[e+8]=this[8],t[e+9]=this[9],t[e+10]=this[10],t[e+11]=this[11],t[e+12]=this[12],t[e+13]=this[13],t[e+14]=this[14],t[e+15]=this[15],t}}let g=new p;class m extends Array{constructor(t=0,e=t,r=t,i="YXZ"){super(t,e,r),this.order=i,this.onChange=()=>{},this._target=this;let n=["0","1","2"];return new Proxy(this,{set(t,e){let r=Reflect.set(...arguments);return r&&n.includes(e)&&t.onChange(),r}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set(t,e=t,r=t){return t.length?this.copy(t):(this._target[0]=t,this._target[1]=e,this._target[2]=r,this.onChange(),this)}copy(t){return this._target[0]=t[0],this._target[1]=t[1],this._target[2]=t[2],this.onChange(),this}reorder(t){return this._target.order=t,this.onChange(),this}fromRotationMatrix(t,e=this.order){return!function(t,e,r="YXZ"){"XYZ"===r?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),.99999>Math.abs(e[8])?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):"YXZ"===r?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),.99999>Math.abs(e[9])?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):"ZXY"===r?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),.99999>Math.abs(e[6])?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):"ZYX"===r?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),.99999>Math.abs(e[2])?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):"YZX"===r?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),.99999>Math.abs(e[1])?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):"XZY"===r&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),.99999>Math.abs(e[4])?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0))}(this._target,t,e),this.onChange(),this}fromQuaternion(t,e=this.order,r){return g.fromQuaternion(t),this._target.fromRotationMatrix(g,e),r||this.onChange(),this}fromArray(t,e=0){return this._target[0]=t[e],this._target[1]=t[e+1],this._target[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}}class b{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new p,this.worldMatrix=new p,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new i.e,this.quaternion=new a,this.scale=new i.e(1),this.rotation=new m,this.up=new i.e(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(t,e=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,e&&t&&t.addChild(this,!1)}addChild(t,e=!0){~this.children.indexOf(t)||this.children.push(t),e&&t.setParent(this,!1)}removeChild(t,e=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),e&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let e=0,r=this.children.length;e<r;e++)this.children[e].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let e=0,r=this.children.length;e<r;e++)this.children[e].traverse(t)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,e=!1){e?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function v(t,e,r){let i=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],h=e[6],u=e[7],c=e[8],d=r[0],f=r[1],p=r[2],g=r[3],m=r[4],b=r[5],v=r[6],y=r[7],x=r[8];return t[0]=d*i+f*a+p*h,t[1]=d*n+f*o+p*u,t[2]=d*s+f*l+p*c,t[3]=g*i+m*a+b*h,t[4]=g*n+m*o+b*u,t[5]=g*s+m*l+b*c,t[6]=v*i+y*a+x*h,t[7]=v*n+y*o+x*u,t[8]=v*s+y*l+x*c,t}class y extends Array{constructor(t=1,e=0,r=0,i=0,n=1,s=0,a=0,o=0,l=1){return super(t,e,r,i,n,s,a,o,l),this}set(t,e,r,i,n,s,a,o,l){return t.length?this.copy(t):(this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=n,this[5]=s,this[6]=a,this[7]=o,this[8]=l,this)}translate(t,e=this){let r,i,n,s,a,o,l,h,u,c,d;return r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],u=e[8],c=t[0],d=t[1],this[0]=r,this[1]=i,this[2]=n,this[3]=s,this[4]=a,this[5]=o,this[6]=c*r+d*s+l,this[7]=c*i+d*a+h,this[8]=c*n+d*o+u,this}rotate(t,e=this){let r,i,n,s,a,o,l,h,u,c,d;return r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],u=e[8],c=Math.sin(t),d=Math.cos(t),this[0]=d*r+c*s,this[1]=d*i+c*a,this[2]=d*n+c*o,this[3]=d*s-c*r,this[4]=d*a-c*i,this[5]=d*o-c*n,this[6]=l,this[7]=h,this[8]=u,this}scale(t,e=this){let r,i;return r=t[0],i=t[1],this[0]=r*e[0],this[1]=r*e[1],this[2]=r*e[2],this[3]=i*e[3],this[4]=i*e[4],this[5]=i*e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this}multiply(t,e){return e?v(this,t,e):v(this,this,t),this}identity(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=1,this[5]=0,this[6]=0,this[7]=0,this[8]=1,this}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this}fromMatrix4(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[4],this[4]=t[5],this[5]=t[6],this[6]=t[8],this[7]=t[9],this[8]=t[10],this}fromQuaternion(t){let e,r,i,n,s,a,o,l,h,u,c,d,f,p,g,m;return e=t[0],r=t[1],i=t[2],n=t[3],s=e+e,a=r+r,o=i+i,l=e*s,h=r*s,u=r*a,c=i*s,d=i*a,f=i*o,p=n*s,g=n*a,m=n*o,this[0]=1-u-f,this[3]=h-m,this[6]=c+g,this[1]=h+m,this[4]=1-l-f,this[7]=d-p,this[2]=c-g,this[5]=d+p,this[8]=1-l-u,this}fromBasis(t,e,r){return this.set(t[0],t[1],t[2],e[0],e[1],e[2],r[0],r[1],r[2]),this}inverse(t=this){let e,r,i,n,s,a,o,l,h,u,c,d,f;return e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],(f=e*(u=(h=t[8])*s-a*l)+r*(c=-h*n+a*o)+i*(d=l*n-s*o))&&(f=1/f,this[0]=u*f,this[1]=(-h*r+i*l)*f,this[2]=(a*r-i*s)*f,this[3]=c*f,this[4]=(h*e-i*o)*f,this[5]=(-a*e+i*n)*f,this[6]=d*f,this[7]=(-l*e+r*o)*f,this[8]=(s*e-r*n)*f),this}getNormalMatrix(t){let e,r,i,n,s,a,o,l,h,u,c,d,f,p,g,m,b,v,y,x,w,M,_,E,C,S,A,j,O;return e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],h=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15],b=e*a-r*s,v=e*o-i*s,y=e*l-n*s,x=r*o-i*a,w=r*l-n*a,M=i*l-n*o,_=h*p-u*f,E=h*g-c*f,C=h*m-d*f,S=u*g-c*p,A=u*m-d*p,(O=b*(j=c*m-d*g)-v*A+y*S+x*C-w*E+M*_)&&(O=1/O,this[0]=(a*j-o*A+l*S)*O,this[1]=(o*C-s*j-l*E)*O,this[2]=(s*A-a*C+l*_)*O,this[3]=(i*A-r*j-n*S)*O,this[4]=(e*j-i*C+n*E)*O,this[5]=(r*C-e*A-n*_)*O,this[6]=(p*M-g*w+m*x)*O,this[7]=(g*y-f*M-m*v)*O,this[8]=(f*w-p*y+m*b)*O),this}}let x=0;class w extends b{constructor(t,{geometry:e,program:r,mode:i=t.TRIANGLES,frustumCulled:n=!0,renderOrder:s=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=x++,this.geometry=e,this.program=r,this.mode=i,this.frustumCulled=n,this.renderOrder=s,this.modelViewMatrix=new p,this.normalMatrix=new y,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(e=>e&&e({mesh:this,camera:t}));let e=this.program.cullFace&&0>this.worldMatrix.determinant();this.program.use({flipFaces:e}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(e=>e&&e({mesh:this,camera:t}))}}},9170:(t,e,r)=>{function i(t){let e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}function a(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function l(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function h(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function u(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function c(t,e){let r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}function d(t,e){let r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}function f(t){let e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}function p(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function g(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function m(t,e){let r=e[0],i=e[1],n=e[2],s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function b(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function v(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[0],o=r[1],l=r[2];return t[0]=n*l-s*o,t[1]=s*a-i*l,t[2]=i*o-n*a,t}function y(t,e,r,i){let n=e[0],s=e[1],a=e[2];return t[0]=n+i*(r[0]-n),t[1]=s+i*(r[1]-s),t[2]=a+i*(r[2]-a),t}function x(t,e,r,i,n){let s=Math.exp(-i*n),a=e[0],o=e[1],l=e[2];return t[0]=r[0]+(a-r[0])*s,t[1]=r[1]+(o-r[1])*s,t[2]=r[2]+(l-r[2])*s,t}function w(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[3]*i+r[7]*n+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*i+r[4]*n+r[8]*s+r[12])/a,t[1]=(r[1]*i+r[5]*n+r[9]*s+r[13])/a,t[2]=(r[2]*i+r[6]*n+r[10]*s+r[14])/a,t}function M(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[3]*i+r[7]*n+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*i+r[4]*n+r[8]*s)/a,t[1]=(r[1]*i+r[5]*n+r[9]*s)/a,t[2]=(r[2]*i+r[6]*n+r[10]*s)/a,t}function _(t,e,r){let i=e[0],n=e[1],s=e[2];return t[0]=i*r[0]+n*r[3]+s*r[6],t[1]=i*r[1]+n*r[4]+s*r[7],t[2]=i*r[2]+n*r[5]+s*r[8],t}function E(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[0],o=r[1],l=r[2],h=r[3],u=o*s-l*n,c=l*i-a*s,d=a*n-o*i,f=o*d-l*c,p=l*u-a*d,g=a*c-o*u,m=2*h;return u*=m,c*=m,d*=m,f*=2,p*=2,g*=2,t[0]=i+u+f,t[1]=n+c+p,t[2]=s+d+g,t}r.d(e,{$A:()=>v,Bw:()=>i,C:()=>n,Cc:()=>y,DI:()=>g,Io:()=>c,Om:()=>b,Qr:()=>h,Re:()=>o,S8:()=>m,Sc:()=>M,WQ:()=>a,YO:()=>x,Z0:()=>w,ei:()=>_,g7:()=>C,gL:()=>E,hG:()=>d,hZ:()=>s,hs:()=>u,lw:()=>l,m3:()=>f,t2:()=>S,ze:()=>p});let C=function(){let t=[0,0,0],e=[0,0,0];return function(r,i){n(t,r),n(e,i),m(t,t),m(e,e);let s=b(t,e);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();function S(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}}}]);